module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},83280,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(7998);function f(){let a=(0,c.useRouter)(),e=(0,c.useSearchParams)(),[f,g]=(0,d.useState)(!1),[h,i]=(0,d.useState)(null),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(!0),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let b=e.get("success"),c=e.get("canceled"),d=e.get("session_id");"true"===b&&d?(i("Payment successful! Verifying subscription..."),k("success"),(async()=>{let b=0,c=setInterval(async()=>{b++;try{let e=await fetch(`/api/verify-session?session_id=${d}`),f=await e.json();f.verified&&f.isSubscribed?(clearInterval(c),i("Payment successful! Your subscription is now active."),k("success"),o(!0),setTimeout(()=>{a.push("/")},1e3)):b>=10&&(clearInterval(c),i("Payment successful! If you see this page again, please refresh."),k("success"),setTimeout(()=>{a.push("/")},2e3))}catch(d){console.error("Error verifying session:",d),b>=10&&(clearInterval(c),i("Payment successful! Redirecting..."),k("success"),setTimeout(()=>{a.push("/")},2e3))}},500)})()):"true"===c&&(i("Payment was canceled. You can try again anytime."),k("error"))},[e,a]),(0,d.useEffect)(()=>{let a=!0;return(async()=>{a&&m(!0);try{let b=await fetch("/api/check-usage");if(b.ok){let c=await b.json();a&&o(!!c?.isSubscribed)}else{let c=await b.text();console.warn("check-usage non-ok:",c),a&&o(!1)}}catch(b){console.error("Failed to fetch subscription status:",b),a&&o(!1)}finally{a&&m(!1)}})(),()=>{a=!1}},[]);let r=async()=>{if(!n){g(!0),i(null),await new Promise(a=>requestAnimationFrame(()=>a(null)));try{let a=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:"price_1SSxP4KsBi3XJI5aSUGGrEKz"})}),b=await a.json();b?.url?window.location.href=b.url:(i("Checkout failed: "+(b?.error||"Unknown error")),k("error"),g(!1))}catch(a){i("Network error. Please try again."),k("error"),g(!1),console.error(a)}}},s=async()=>{q(!0),await new Promise(a=>requestAnimationFrame(()=>a(null)));try{let a=await fetch("/api/create-portal-session",{method:"POST"}),b=await a.json();b?.url?window.location.href=b.url:(i("Could not open billing portal."),k("error"))}catch(a){console.error(a),i("Could not open billing portal."),k("error")}finally{q(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"max-w-3xl mx-auto p-6 py-12",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"text-4xl font-bold mb-2 text-purple-100",children:"Upgrade to Pro"}),(0,b.jsx)("p",{className:"text-purple-200 text-lg",children:"Unlock unlimited image transformations"})]}),h&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===j?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:h}),(0,b.jsxs)("div",{className:"bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 rounded-2xl shadow-xl p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"inline-block px-4 py-2 bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-full text-sm font-semibold mb-4",children:"PRO PLAN"}),(0,b.jsx)("h3",{className:"text-3xl font-bold text-purple-100 mb-2",children:"Unlimited Access"}),(0,b.jsx)("p",{className:"text-purple-200",children:"Transform as many images as you want"})]}),(0,b.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"text-purple-200",children:"Unlimited image generations"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"text-purple-200",children:"Priority processing"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"text-purple-200",children:"No usage limits"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"text-purple-200",children:"Cancel anytime"})]})]}),(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"text-5xl font-bold text-purple-100 mb-2",children:"$9"}),(0,b.jsx)("div",{className:"text-purple-200",children:"per month"})]}),n?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("button",{disabled:!0,className:"w-full px-6 py-4 bg-gray-600/30 text-white rounded-xl font-semibold text-lg shadow-inner cursor-not-allowed","aria-disabled":!0,children:"Subscribed"}),(0,b.jsx)("button",{onClick:s,disabled:p,className:"w-full px-6 py-4 cursor-pointer bg-gray-700/60 bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-xl font-semibold text-lg shadow-md hover:shadow-lg transform hover:scale-102 transition-all duration-150 disabled:opacity-50 mt-2",children:p?"Opening billing portal...":"Manage Subscription"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{onClick:r,disabled:f,className:"w-full px-6 py-4 cursor-pointer bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:f?"Redirecting to checkout...":"Subscribe Now"}),(0,b.jsx)("p",{className:"text-center text-sm text-purple-300 mt-4",children:"Secure payment powered by Stripe"})]})]})]}),l&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm pointer-events-none",children:(0,b.jsxs)("div",{className:"pointer-events-auto bg-white/10 rounded-lg p-6 flex items-center space-x-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce"}),(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.15s"}}),(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.3s"}})]}),(0,b.jsx)("div",{className:"text-white",children:"Checking subscriptionâ€¦"})]})}),(f||p)&&(0,b.jsx)("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-blue-400 rounded-full animate-spin mb-4"}),(0,b.jsx)("div",{className:"text-white",children:f?"Redirecting to checkout...":"Opening billing portal..."})]})})]})}function g(){return(0,b.jsxs)("div",{className:"max-w-3xl mx-auto p-6 py-12 text-center text-white",children:[(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-gray-300 border-t-blue-400 rounded-full animate-spin inline-block mr-2"}),"Loading page details..."]})}function h(){return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 px-6 sm:pl-28 sm:pr-8 pt-20 sm:pt-24",children:[(0,b.jsx)(e.default,{}),(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)(g,{}),children:(0,b.jsx)(f,{})})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b4fc4115._.js.map