module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},45412,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7998),e=a.i(50944);function f(){let a=(0,e.useRouter)(),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null);function n(a){return a?new Date("number"==typeof a?1e3*a:a).toLocaleDateString():"—"}async function o(){i(!0),await new Promise(a=>requestAnimationFrame(()=>a(null)));try{let a=await fetch("/api/create-portal-session",{method:"POST"}),b=await a.json();b?.url?window.location.href=b.url:m("Could not open billing portal.")}catch(a){console.error(a),m("Could not open billing portal.")}finally{i(!1)}}(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/check-usage");if(!a.ok)throw Error("Failed");let b=await a.json();k(b)}catch(a){m("Failed to load account data."),console.error(a)}finally{g(!1)}})()},[]);let p=j?.subscription??null,q=j?.username??"User",r=j?.isSubscribed??!1;return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("main",{className:"max-w-3xl mx-auto px-6 lg:pl-28 lg:pr-8 p-6 pt-20 sm:pt-24",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-purple-100 mb-2",children:"Account & Billing"}),(0,b.jsx)("p",{className:"text-purple-200 mb-6",children:"Manage your subscription, payment methods and invoices."}),l&&(0,b.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-800 border border-red-200",children:l}),(0,b.jsxs)("div",{className:"bg-gray-800/40 border border-purple-700/30 rounded-2xl p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-purple-200",children:"User"}),(0,b.jsx)("div",{className:"text-lg font-semibold text-purple-100",children:q})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm text-purple-200",children:"Status"}),(0,b.jsx)("div",{className:"text-lg font-semibold text-purple-100",children:p?p.status??"Unknown":r?"Active":"Not subscribed"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-purple-200",children:"Plan"}),(0,b.jsx)("div",{className:"text-sm text-purple-100",children:p?.plan_name??(r?"PRO":"Free")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-purple-200",children:"Next billing"}),(0,b.jsx)("div",{className:"text-sm text-purple-100",children:n(p?.current_period_end)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-purple-200",children:"Trial ends"}),(0,b.jsx)("div",{className:"text-sm text-purple-100",children:n(p?.trial_end)})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,b.jsx)("button",{onClick:o,disabled:h,className:"px-4 py-2 cursor-pointer rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 text-white font-semibold hover:brightness-105 disabled:opacity-50",children:h?"Opening portal…":"Manage subscription"}),(0,b.jsx)("button",{onClick:()=>a.push("/subscribe"),className:"px-4 py-2 cursor-pointer rounded-xl border border-purple-600 text-purple-100 hover:bg-purple-700/20",children:"View plans"})]})]}),(0,b.jsxs)("div",{className:"bg-gray-800/30 border border-purple-700/20 rounded-2xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-purple-100 mb-3",children:"Invoices & Payments"}),(0,b.jsx)("p",{className:"text-sm text-purple-200",children:"You can view your invoices and payment history in the Stripe Customer Portal."})]})]}),f&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm pointer-events-none",children:(0,b.jsxs)("div",{className:"pointer-events-auto bg-white/6 rounded-lg p-6 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce"}),(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.15s"}}),(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.3s"}})]}),(0,b.jsx)("div",{className:"text-white",children:"Loading account…"})]})}),h&&(0,b.jsx)("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/60",children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-blue-400 rounded-full animate-spin mb-4"}),(0,b.jsx)("div",{className:"text-white",children:"Opening billing portal…"})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3219711f._.js.map