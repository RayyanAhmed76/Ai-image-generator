{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["// middleware.ts\nimport { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\n\nexport function middleware(req: NextRequest) {\n  const { pathname } = req.nextUrl;\n\n  // allow public paths\n  if (\n    pathname.startsWith(\"/api\") ||\n    pathname.startsWith(\"/_next\") ||\n    pathname.startsWith(\"/static\") ||\n    pathname === \"/favicon.ico\" ||\n    pathname.startsWith(\"/login\") ||\n    pathname.startsWith(\"/about\")\n  ) {\n    return NextResponse.next();\n  }\n\n  // check auth cookie\n  const cookie = req.cookies.get(\"flux_auth\")?.value;\n\n  if (!cookie) {\n    // If accessing root path, redirect to about page\n    if (pathname === \"/\") {\n      const aboutUrl = req.nextUrl.clone();\n      aboutUrl.pathname = \"/about\";\n      return NextResponse.redirect(aboutUrl);\n    }\n    // For other protected paths, redirect to login\n    const loginUrl = req.nextUrl.clone();\n    loginUrl.pathname = \"/login\";\n    // optionally include returnTo param:\n    loginUrl.searchParams.set(\"returnTo\", pathname);\n    return NextResponse.redirect(loginUrl);\n  }\n\n  // authenticated\n  return NextResponse.next();\n}\n\n// Apply middleware to all pages except assets/api/_next/login\nexport const config = {\n  matcher: [\n    /*\n      Match all paths except:\n      - /login\n      - /api/*\n      - /_next/*\n      - /static/*\n      - /favicon.ico\n    */\n    \"/((?!api|_next|static|favicon.ico|login).*)\",\n    \"/\", // ensure root is matched\n  ],\n};\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;;;;AAChB;AAAA;;AAGO,SAAS,WAAW,GAAgB;IACzC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,qBAAqB;IACrB,IACE,SAAS,UAAU,CAAC,WACpB,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,cACpB,aAAa,kBACb,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,WACpB;QACA,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,oBAAoB;IACpB,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc;IAE7C,IAAI,CAAC,QAAQ;QACX,iDAAiD;QACjD,IAAI,aAAa,KAAK;YACpB,MAAM,WAAW,IAAI,OAAO,CAAC,KAAK;YAClC,SAAS,QAAQ,GAAG;YACpB,OAAO,gMAAY,CAAC,QAAQ,CAAC;QAC/B;QACA,+CAA+C;QAC/C,MAAM,WAAW,IAAI,OAAO,CAAC,KAAK;QAClC,SAAS,QAAQ,GAAG;QACpB,qCAAqC;QACrC,SAAS,YAAY,CAAC,GAAG,CAAC,YAAY;QACtC,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,gBAAgB;IAChB,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAGO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;;IAOA,GACA;QACA;KACD;AACH"}}]
}