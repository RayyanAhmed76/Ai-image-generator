{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/my-flux-saas/components/Nav.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { LogOut } from \"lucide-react\";\nimport { useState, useRef, useEffect } from \"react\";\n\nconst FREE_TRIES_LIMIT = 2;\n\ntype SubscriptionShape = {\n  status?: string | null;\n  current_period_end?: number | string | null;\n  trial_end?: number | string | null;\n  plan_name?: string | null;\n};\n\nexport default function Nav() {\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const [open, setOpen] = useState(false);\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement | null>(null);\n  const [username, setUsername] = useState<string>(\"User\");\n  const [userInitial, setUserInitial] = useState<string>(\"U\");\n\n  const [subscription, setSubscription] = useState<SubscriptionShape | null>(\n    null\n  );\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const [usageCount, setUsageCount] = useState<number>(0);\n  const [subLoading, setSubLoading] = useState(true);\n\n  const mobileNavWidthRem = 11;\n\n  function toDate(value?: number | string | null): Date | null {\n    if (!value) return null;\n    if (typeof value === \"number\") {\n      return value > 1e12 ? new Date(value) : new Date(value * 1000);\n    }\n    const d = new Date(value);\n    return isNaN(d.getTime()) ? null : d;\n  }\n\n  function daysLeft(until?: number | string | null) {\n    const d = toDate(until);\n    if (!d) return null;\n    const now = new Date();\n    const ms = d.getTime() - now.getTime();\n    return Math.ceil(ms / (1000 * 60 * 60 * 24));\n  }\n\n  // Fetch user & subscription info\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      try {\n        const res = await fetch(\"/api/check-usage\");\n        const data = await res.json();\n\n        if (data?.authenticated && data?.username) {\n          setUsername(data.username);\n          setUserInitial(data.username.charAt(0).toUpperCase());\n        }\n\n        setSubscription(data.subscription || null);\n        setIsSubscribed(!!data.isSubscribed);\n        setUsageCount(data.usageCount ?? 0);\n      } catch (err) {\n        console.error(\"Error fetching user info:\", err);\n        setSubscription(null);\n        setIsSubscribed(false);\n        setUsageCount(0);\n      } finally {\n        setSubLoading(false);\n      }\n    };\n    fetchUserInfo();\n  }, []);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleDocumentClick(e: MouseEvent) {\n      if (!dropdownRef.current) return;\n      if (!dropdownRef.current.contains(e.target as Node)) {\n        setOpen(false);\n      }\n    }\n    document.addEventListener(\"click\", handleDocumentClick);\n    return () => document.removeEventListener(\"click\", handleDocumentClick);\n  }, []);\n\n  useEffect(() => {\n    setMobileOpen(false);\n  }, [pathname]);\n\n  // Mobile nav styling\n  useEffect(() => {\n    const CLASS = \"mobile-nav-open\";\n    const STYLE_ID = \"mobile-nav-open-style\";\n\n    function addStyle() {\n      if (document.getElementById(STYLE_ID)) return;\n      const style = document.createElement(\"style\");\n      style.id = STYLE_ID;\n      style.innerHTML = `\n        body.${CLASS} #__next > * {\n          margin-left: auto !important;\n          margin-right: auto !important;\n          max-width: calc(100% - ${mobileNavWidthRem}rem) !important;\n        }\n        @media (max-width: 420px) {\n          body.${CLASS} #__next > * {\n            max-width: calc(100% - ${mobileNavWidthRem - 0.5}rem) !important;\n          }\n        }\n      `;\n      document.head.appendChild(style);\n    }\n\n    if (mobileOpen) {\n      document.body.classList.add(CLASS);\n      addStyle();\n    } else {\n      document.body.classList.remove(CLASS);\n    }\n\n    return () => document.body.classList.remove(CLASS);\n  }, [mobileOpen]);\n\n  const handleLogout = async () => {\n    try {\n      await fetch(\"/api/logout\", { method: \"POST\" });\n      window.dispatchEvent(\n        new CustomEvent(\"app:notify\", { detail: { message: \"Logged out\" } })\n      );\n      setTimeout(() => router.push(\"/login\"), 600);\n    } catch {\n      window.dispatchEvent(\n        new CustomEvent(\"app:notify\", { detail: { message: \"Logout failed\" } })\n      );\n    }\n  };\n\n  const mobileClosedTransform = mobileOpen\n    ? \"translate-x-0\"\n    : \"translate-x-full\";\n  const borderResponsive =\n    \"border-l border-purple-700/50 sm:border-r sm:border-l-0\";\n\n  // Render subscription / free prompt row\n  const renderSubscriptionRow = () => {\n    if (subLoading) {\n      return (\n        <div className=\"text-center py-2 text-xs text-purple-200\">\n          Loading subscription…\n        </div>\n      );\n    }\n\n    const s = subscription || { status: \"none\", plan_name: \"Free\" };\n    const freeLeft = Math.max(FREE_TRIES_LIMIT - usageCount, 0);\n\n    // Free prompts\n    if (!isSubscribed && freeLeft > 0) {\n      return (\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"text-sm font-medium text-purple-100\">Free usage</div>\n          <div className=\"text-xs text-purple-200\">\n            {freeLeft} free prompt{freeLeft > 1 ? \"s\" : \"\"} left\n          </div>\n          <div className=\"pt-2\">\n            <button\n              onClick={() => router.push(\"/subscribe\")}\n              className=\"block w-full text-center px-2 py-1 rounded-md bg-gradient-to-r from-sky-500 to-indigo-500 text-white text-sm font-medium\"\n              type=\"button\"\n            >\n              Upgrade\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    // Subscribed\n    if (isSubscribed) {\n      const nextDate = toDate(s.current_period_end);\n      const formatted = nextDate\n        ? new Intl.DateTimeFormat(undefined, {\n            month: \"short\",\n            day: \"numeric\",\n            year: \"numeric\",\n          }).format(nextDate)\n        : \"Next billing available\";\n\n      return (\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"text-sm font-medium text-purple-100\">Subscribed</div>\n          <div className=\"text-xs text-purple-200\">Plan: {s.plan_name}</div>\n          <div className=\"pt-2\">\n            <button\n              onClick={() => router.push(\"/account\")}\n              className=\"block w-full text-center px-2 py-1 cursor-pointer rounded-md border hover:bg-purple-500 border-purple-600 text-purple-100 text-sm font-medium\"\n              type=\"button\"\n            >\n              Manage\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    // Not subscribed and no free prompts\n    return (\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"text-sm font-medium text-purple-100\">\n          Not subscribed\n        </div>\n        <div className=\"text-xs text-purple-200\">\n          Start your subscription for unlimited prompts.\n        </div>\n        <div className=\"pt-2\">\n          <button\n            onClick={() => router.push(\"/subscribe\")}\n            className=\"block w-full text-center px-2 py-1 rounded-md bg-gradient-to-r from-sky-500 to-indigo-500 text-white text-sm font-medium\"\n            type=\"button\"\n          >\n            Subscribe\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {/* Mobile toggle button */}\n      <button\n        aria-label={mobileOpen ? \"Close navigation\" : \"Open navigation\"}\n        onClick={() => setMobileOpen((s) => !s)}\n        className={`${\n          mobileOpen\n            ? \"\"\n            : \"sm:hidden fixed top-4 right-4 z-50 bg-purple-800/90 text-white p-2 rounded-md shadow-lg focus:outline-none\"\n        }`}\n      >\n        {!mobileOpen && (\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M4 6h16M4 12h16M4 18h16\"\n            />\n          </svg>\n        )}\n      </button>\n\n      {/* Mobile overlay */}\n      <div\n        aria-hidden={!mobileOpen}\n        onClick={() => setMobileOpen(false)}\n        className={`sm:hidden fixed inset-0 bg-black/40 z-30 transition-opacity ${\n          mobileOpen\n            ? \"opacity-100 pointer-events-auto\"\n            : \"opacity-0 pointer-events-none\"\n        }`}\n      />\n\n      {/* Sidebar */}\n      <nav\n        className={`fixed top-0 h-full z-40 flex flex-col py-4 sm:py-6\n          bg-gradient-to-b from-purple-900/90 via-purple-800/90 to-indigo-900/90 backdrop-blur-md\n          transition-transform duration-300 ease-in-out transform\n          ${mobileClosedTransform} sm:translate-x-0\n          right-0 sm:left-0 sm:right-auto\n          w-44 sm:w-16 ${borderResponsive}`}\n        style={{ willChange: \"transform\" }}\n      >\n        {/* Logo */}\n        <div className=\"mb-4 sm:mb-8 w-full flex items-center justify-center sm:justify-center px-3\">\n          <Link href=\"/\" className=\"flex items-center gap-3 w-full\">\n            <div className=\"w-12 h-12 sm:w-16 sm:h-16 rounded-xl p-1.5 sm:p-2 flex items-center justify-center  shadow-lg hover:shadow-xl transition-shadow\">\n              <img\n                src=\"/images/logo.png\"\n                alt=\"Logo\"\n                className=\"w-full h-full object-contain rounded-md\"\n              />\n            </div>\n            <span\n              className={`${\n                mobileOpen ? \"inline-block\" : \"hidden\"\n              } sm:hidden text-white font-semibold text-lg ml-2 truncate`}\n            >\n              Bunyad\n            </span>\n          </Link>\n        </div>\n\n        {/* Nav links */}\n        <div className=\"flex flex-col gap-3 w-full px-2\">\n          <Link\n            href=\"/\"\n            className={`flex items-center gap-3 p-2 rounded-lg transition-all w-full ${\n              pathname === \"/\"\n                ? \"bg-purple-600/50 text-white shadow-lg\"\n                : \"text-purple-200 hover:bg-purple-700/30 hover:text-white\"\n            } ${mobileOpen ? \"justify-start pl-3\" : \"justify-center\"}`}\n            title=\"Dashboard\"\n          >\n            <svg\n              className=\"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n              />\n            </svg>\n            <span\n              className={`${\n                mobileOpen ? \"inline-block\" : \"hidden\"\n              } sm:hidden text-sm font-medium`}\n            >\n              Dashboard\n            </span>\n          </Link>\n          <button\n            onClick={() => router.push(\"/subscribe\")}\n            className={`flex items-center gap-3 p-2 cursor-pointer rounded-lg transition-all w-full ${\n              pathname === \"/subscribe\"\n                ? \"bg-purple-600/50 text-white shadow-lg\"\n                : \"text-purple-200 hover:bg-purple-700/30 hover:text-white\"\n            } ${mobileOpen ? \"justify-start pl-3\" : \"justify-center\"}`}\n            title=\"Plans\"\n            type=\"button\"\n          >\n            <svg\n              className=\"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n            <span\n              className={`${\n                mobileOpen ? \"inline-block\" : \"hidden\"\n              } sm:hidden text-sm font-medium`}\n            >\n              Plans\n            </span>\n          </button>\n        </div>\n\n        {/* Logout / avatar */}\n        <div className=\"mt-auto w-full px-2 pb-4\">\n          <div ref={dropdownRef} className=\"relative w-full\">\n            <button\n              onClick={() => setOpen((s) => !s)}\n              aria-haspopup=\"true\"\n              aria-expanded={open}\n              className={`w-full flex items-center gap-2 p-2 rounded-lg transition-all cursor-pointer text-purple-200 hover:bg-purple-700/30 hover:text-white ${\n                mobileOpen ? \"justify-start pl-3\" : \"justify-center\"\n              }`}\n              title={username}\n            >\n              <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center font-semibold text-white text-xs sm:text-sm shadow-lg flex-shrink-0\">\n                {userInitial}\n              </div>\n              <span\n                className={`${\n                  mobileOpen ? \"inline-block\" : \"hidden\"\n                } sm:hidden ml-1 text-sm font-medium`}\n              >\n                {username}\n              </span>\n            </button>\n\n            <div\n              className={`absolute right-full mr-2 bottom-0 w-44 sm:w-48 bg-purple-800/95 backdrop-blur-md border border-purple-600/50 rounded-lg shadow-xl z-50 sm:left-full sm:ml-2 sm:right-auto ${\n                open ? \"block\" : \"hidden\"\n              }`}\n            >\n              <div className=\"p-3\">\n                <div className=\"px-2 py-1.5 text-sm text-purple-100 font-semibold\">\n                  {username}\n                </div>\n                <div className=\"mt-2\">{renderSubscriptionRow()}</div>\n                <div className=\"mt-3 border-t border-purple-700/50 pt-3\">\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full flex items-center gap-2 px-2 py-2 text-sm text-purple-200 hover:bg-purple-700/50 rounded cursor-pointer transition-colors\"\n                    aria-label=\"Logout\"\n                  >\n                    <LogOut size={16} />\n                    <span>Logout</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </nav>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 634, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/my-flux-saas/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Nav from \"../components/Nav\";\n\nexport default function Page(): JSX.Element {\n  const router = useRouter();\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [base64Image, setBase64Image] = useState<string | null>(null);\n  const [prompt, setPrompt] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const [resultUrl, setResultUrl] = useState<string | null>(null);\n  const [showLoader, setShowLoader] = useState(false);\n  const [sliderPosition, setSliderPosition] = useState<number>(50);\n  const [isDragging, setIsDragging] = useState<boolean>(false);\n  const confettiRef = useRef<HTMLDivElement | null>(null);\n  const pollIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // ----------------- TOAST -----------------\n  const [toastMsg, setToastMsg] = useState<string | null>(null);\n  const toastTimerRef = useRef<number | null>(null);\n  const showToast = (text: string, ms = 3000) => {\n    setToastMsg(text);\n    if (toastTimerRef.current) window.clearTimeout(toastTimerRef.current);\n    toastTimerRef.current = window.setTimeout(\n      () => setToastMsg(null),\n      ms\n    ) as unknown as number;\n  };\n  useEffect(() => {\n    const handler = (e: Event) => {\n      const detail = (e as CustomEvent)?.detail as any;\n      showToast(detail?.message ?? \"Notification\");\n    };\n    window.addEventListener(\"app:notify\", handler as EventListener);\n    return () =>\n      window.removeEventListener(\"app:notify\", handler as EventListener);\n  }, []);\n\n  // ----------------- USAGE CHECK -----------------\n  useEffect(() => {\n    const checkUsage = async () => {\n      try {\n        const res = await fetch(\"/api/check-usage\");\n        const data = await res.json();\n        if (data.limitReached && !data.isSubscribed)\n          router.replace(\"/subscribe\");\n      } catch (err) {\n        console.error(\"Error checking usage:\", err);\n      }\n    };\n    checkUsage();\n  }, [router]);\n\n  // ----------------- POLLING -----------------\n  const clearPolling = () => {\n    if (pollIntervalRef.current) {\n      clearInterval(pollIntervalRef.current);\n      pollIntervalRef.current = null;\n    }\n  };\n  useEffect(() => {\n    return () => clearPolling();\n  }, []);\n\n  const startPolling = (pollingUrl: string) => {\n    clearPolling();\n    let pollAttempts = 0;\n    const maxAttempts = 60;\n    const intervalMs = 2000;\n\n    const doPoll = async () => {\n      pollAttempts++;\n      try {\n        const pollRes = await fetch(\"/api/fetch_result\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ pollingUrl }),\n        });\n\n        const pollData = await pollRes.json().catch(() => null);\n\n        if (!pollData) {\n          if (pollAttempts >= maxAttempts) {\n            clearPolling();\n            setShowLoader(false);\n            setLoading(false);\n            showToast(\"Generation timeout. Please try again.\");\n          }\n          return;\n        }\n\n        if (pollData?.imageUrl) {\n          clearPolling();\n          setResultUrl(pollData.imageUrl);\n          setShowLoader(false);\n          setLoading(false);\n          showToast(\"Generated!\");\n          return;\n        }\n\n        if (pollData?.ready === true) {\n          clearPolling();\n          setShowLoader(false);\n          setLoading(false);\n          showToast(\n            \"Job completed but no image returned. Try again or contact support.\"\n          );\n          return;\n        }\n\n        if (pollAttempts >= maxAttempts) {\n          clearPolling();\n          setShowLoader(false);\n          setLoading(false);\n          showToast(\"Generation timeout. Please try again.\");\n        }\n      } catch (err) {\n        console.error(\"Polling error:\", err);\n        if (pollAttempts >= maxAttempts) {\n          clearPolling();\n          setShowLoader(false);\n          setLoading(false);\n          showToast(\"Error fetching result. Please try again.\");\n        }\n      }\n    };\n\n    doPoll();\n    pollIntervalRef.current = setInterval(doPoll, intervalMs);\n  };\n\n  // ----------------- IMAGE COMPRESSION -----------------\n  const compressImage = (\n    file: File,\n    maxWidth: number,\n    maxHeight: number,\n    quality: number\n  ): Promise<File> => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => {\n        let { width, height } = img;\n        const aspectRatio = width / height;\n        if (width > maxWidth) {\n          width = maxWidth;\n          height = width / aspectRatio;\n        }\n        if (height > maxHeight) {\n          height = maxHeight;\n          width = height * aspectRatio;\n        }\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) return reject(\"Cannot get canvas context\");\n        ctx.drawImage(img, 0, 0, width, height);\n        canvas.toBlob(\n          (blob) => {\n            if (!blob) return reject(\"Compression failed\");\n            resolve(new File([blob], file.name, { type: file.type }));\n          },\n          file.type,\n          quality\n        );\n      };\n      img.onerror = reject;\n      img.src = URL.createObjectURL(file);\n    });\n  };\n\n  // ----------------- FILE SELECT -----------------\n  const handleFileSelect = async (file: File | null) => {\n    if (!file) return;\n\n    const MAX_SIZE_MB = 20;\n    const isMobile = /Mobi|Android/i.test(navigator.userAgent);\n    const maxDim = isMobile ? 800 : 1024;\n    const quality = isMobile ? 0.7 : 0.8;\n\n    try {\n      let processedFile = file;\n      if (file.size / 1024 / 1024 > 5)\n        processedFile = await compressImage(file, maxDim, maxDim, quality);\n      if (processedFile.size / 1024 / 1024 > MAX_SIZE_MB) {\n        showToast(\"Image too large even after compression (max 20MB).\");\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const r = reader.result as string | null;\n        if (!r) return showToast(\"Failed to read file\");\n        setImagePreview(r);\n        const comma = r.indexOf(\",\");\n        const plain = comma >= 0 ? r.slice(comma + 1) : r;\n        setBase64Image(plain);\n        showToast(\"Image ready → now enter a prompt\");\n      };\n      reader.readAsDataURL(processedFile);\n    } catch (err) {\n      console.error(\"Error processing image:\", err);\n      showToast(\"Failed to process image\");\n    }\n  };\n\n  const onDrop = (e: DragEvent | any) => {\n    e.preventDefault();\n    handleFileSelect(e.dataTransfer?.files?.[0] ?? null);\n  };\n  const onDragOver = (e: DragEvent | any) => e.preventDefault();\n\n  // ----------------- GENERATE -----------------\n  const handleGenerate = async () => {\n    if (!base64Image) return showToast(\"Upload an image first\");\n    if (!prompt.trim()) return showToast(\"Enter a prompt\");\n\n    clearPolling();\n    setShowLoader(true);\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/generate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ prompt, base64Image }),\n      });\n\n      const json = await res.json().catch(() => null);\n\n      if (res.status === 403 && json?.limitReached) {\n        setShowLoader(false);\n        setLoading(false);\n        showToast(\"Free trial limit reached. Redirecting to subscription...\");\n        setTimeout(() => (window.location.href = \"/subscribe\"), 2000);\n        return;\n      }\n      if (res.status === 401) {\n        setShowLoader(false);\n        setLoading(false);\n        showToast(\"Please log in to continue\");\n        setTimeout(() => (window.location.href = \"/login\"), 2000);\n        return;\n      }\n      if (!json) {\n        setShowLoader(false);\n        setLoading(false);\n        showToast(\"Unexpected response from server. Try again.\");\n        return;\n      }\n      if (json?.image) {\n        setResultUrl(json.image);\n        setShowLoader(false);\n        setLoading(false);\n        showToast(\"Generated!\");\n        return;\n      }\n      if (json?.polling_url) {\n        showToast(\"Submitted => now processing...\");\n        startPolling(json.polling_url);\n        return;\n      }\n      if (json?.error) {\n        setShowLoader(false);\n        setLoading(false);\n        showToast(json.error);\n        return;\n      }\n\n      setShowLoader(false);\n      setLoading(false);\n      showToast(\"Unexpected response. Please try again.\");\n    } catch (err) {\n      console.error(\"Network / generate error:\", err);\n      setShowLoader(false);\n      setLoading(false);\n      showToast(\"Network error\");\n    }\n  };\n\n  // ----------------- DOWNLOAD -----------------\n  const handleDownload = async () => {\n    if (!resultUrl) return;\n\n    try {\n      let blob: Blob;\n      if (resultUrl.startsWith(\"data:\")) {\n        const response = await fetch(resultUrl);\n        blob = await response.blob();\n      } else {\n        showToast(\"Preparing download...\");\n        const response = await fetch(\"/api/fetch-image\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ imageUrl: resultUrl }),\n        });\n\n        const data = await response.json();\n        if (!response.ok || data.error) {\n          showToast(data.error || \"Failed to prepare download\");\n          return;\n        }\n\n        const blobResponse = await fetch(data.dataUrl);\n        blob = await blobResponse.blob();\n      }\n\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = `generated-image-${Date.now()}.png`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n      showToast(\"Image downloaded!\");\n    } catch (err) {\n      console.error(\"Error downloading image:\", err);\n      showToast(\"Failed to download image\");\n    }\n  };\n\n  // ----------------- CONFETTI -----------------\n  useEffect(() => {\n    if (!resultUrl) return;\n    const container = confettiRef.current;\n    if (!container) return;\n    container.innerHTML = \"\";\n    const colors = [\n      \"#60A5FA\",\n      \"#F97316\",\n      \"#34D399\",\n      \"#F472B6\",\n      \"#F59E0B\",\n      \"#A78BFA\",\n    ];\n    for (let i = 0; i < 14; i++) {\n      const el = document.createElement(\"span\");\n      el.className = \"confetti-piece absolute rounded-sm\";\n      el.style.left = `${20 + Math.random() * 60}%`;\n      el.style.top = `${10 + Math.random() * 30}%`;\n      el.style.width = `${6 + Math.random() * 8}px`;\n      el.style.height = `${10 + Math.random() * 10}px`;\n      el.style.background = colors[Math.floor(Math.random() * colors.length)];\n      el.style.transform = `translateY(-10px) rotate(${\n        Math.random() * 360\n      }deg)`;\n      el.style.opacity = \"0\";\n      el.style.animation = `confetti ${\n        900 + Math.random() * 400\n      }ms cubic-bezier(.2,.8,.2,1) forwards ${Math.random() * 200}ms`;\n      container.appendChild(el);\n    }\n    const t = setTimeout(() => (container.innerHTML = \"\"), 1600);\n    return () => clearTimeout(t);\n  }, [resultUrl]);\n\n  // ----------------- SLIDER -----------------\n  const handleSliderStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n  useEffect(() => {\n    if (!isDragging) return;\n\n    const sliderContainer = document.querySelector(\n      \"[data-slider-container]\"\n    ) as HTMLElement;\n\n    if (!sliderContainer) return;\n\n    const updateSlider = (clientX: number) => {\n      const rect = sliderContainer.getBoundingClientRect();\n      const x = clientX - rect.left;\n      const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));\n      setSliderPosition(percentage);\n    };\n\n    const handleMouseMove = (e: MouseEvent) => updateSlider(e.clientX);\n\n    const handleTouchMove = (e: TouchEvent) => {\n      e.preventDefault(); // stops screen from scrolling while sliding\n      updateSlider(e.touches[0].clientX);\n    };\n\n    const handleEnd = () => setIsDragging(false);\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleEnd);\n\n    document.addEventListener(\"touchmove\", handleTouchMove, { passive: false });\n    document.addEventListener(\"touchend\", handleEnd);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleEnd);\n\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n      document.removeEventListener(\"touchend\", handleEnd);\n    };\n  }, [isDragging]);\n\n  const handleUseGeneratedImage = async () => {\n    if (!resultUrl) return;\n    try {\n      if (resultUrl.startsWith(\"data:\")) {\n        const commaIndex = resultUrl.indexOf(\",\");\n        const base64Data =\n          commaIndex >= 0 ? resultUrl.slice(commaIndex + 1) : resultUrl;\n        setImagePreview(resultUrl);\n        setBase64Image(base64Data);\n        showToast(\"Image loaded! Enter a new prompt to modify it.\");\n      } else {\n        showToast(\"Loading image...\");\n        const response = await fetch(\"/api/fetch-image\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ imageUrl: resultUrl }),\n        });\n        const data = await response.json();\n        if (!response.ok || data.error) {\n          showToast(data.error || \"Failed to load image\");\n          return;\n        }\n        setImagePreview(data.dataUrl);\n        setBase64Image(data.base64);\n        showToast(\"Image loaded! Enter a new prompt to modify it.\");\n      }\n    } catch (err) {\n      console.error(\"Error using generated image:\", err);\n      showToast(\"Failed to load image\");\n    }\n  };\n\n  // ----------------- RETURN JSX -----------------\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\">\n      <Nav />\n      <div className=\"max-w-6xl mx-auto px-6 lg:pl-28 lg:pr-8 p-4 sm:p-6 pt-20 sm:pt-24\">\n        <div\n          ref={confettiRef}\n          className=\"pointer-events-none fixed inset-0 z-50\"\n        />\n\n        {/* Toast */}\n        <div\n          aria-live=\"polite\"\n          className=\"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:items-start z-50\"\n        >\n          <div className=\"w-full flex flex-col items-center space-y-2 sm:items-end\">\n            {toastMsg && (\n              <div className=\"pointer-events-auto max-w-md w-full bg-gray-800/95 backdrop-blur-md text-gray-100 border border-gray-600/50 rounded-lg shadow-lg overflow-hidden\">\n                <div className=\"p-3 text-sm\">{toastMsg}</div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <header className=\"mb-6 sm:mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-purple-100 via-purple-200 to-indigo-200 bg-clip-text text-transparent pb-3 \">\n            Imagine your Bunyad\n          </h1>\n          <p className=\"text-purple-300 text-base sm:text-lg font-medium mt-2 flex items-center gap-2 flex-wrap\">\n            <span className=\"text-purple-400\">Upload</span>\n            <span className=\"text-purple-500\">→</span>\n            <span className=\"text-purple-400\">Prompt</span>\n            <span className=\"text-purple-500\">→</span>\n            <span className=\"text-purple-400\">Generate</span>\n          </p>\n        </header>\n\n        <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <section className=\"lg:col-span-2 space-y-6\">\n            <div\n              onDrop={onDrop}\n              onDragOver={onDragOver}\n              className=\"rounded-2xl p-4 sm:p-6 border border-purple-700/30 bg-gray-800/40 backdrop-blur-sm shadow-lg\"\n            >\n              <div className=\"flex flex-col sm:flex-row gap-4 sm:gap-6\">\n                <div\n                  className=\"w-full sm:w-56 h-48 sm:h-56 bg-gray-700/60 hover:bg-gray-700/80 rounded-xl flex items-center justify-center cursor-pointer border border-gray-600/30\"\n                  onClick={() => {\n                    const input = document.createElement(\"input\");\n                    input.type = \"file\";\n                    input.accept = \"image/*\";\n                    input.onchange = (e: any) =>\n                      handleFileSelect(\n                        (e.target as HTMLInputElement).files?.[0] ?? null\n                      );\n                    input.click();\n                  }}\n                >\n                  {imagePreview ? (\n                    <img\n                      src={imagePreview}\n                      className=\"w-full h-full object-cover rounded-xl\"\n                    />\n                  ) : (\n                    <div className=\"text-center transition-transform duration-200 hover:scale-110\">\n                      <svg\n                        className=\"w-12 h-12 text-gray-400 mx-auto mb-2\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          d=\"M12 4v8\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        />\n                        <path\n                          d=\"M20 12l-8-8-8 8\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        />\n                        <rect\n                          x=\"3\"\n                          y=\"12\"\n                          width=\"18\"\n                          height=\"8\"\n                          rx=\"2\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"1.5\"\n                        />\n                      </svg>\n                      <p className=\"text-sm text-gray-300\">Upload Image</p>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex-1\">\n                  <label className=\"text-sm font-medium text-purple-200\">\n                    Prompt\n                  </label>\n                  <textarea\n                    value={prompt}\n                    onChange={(e) => setPrompt(e.target.value)}\n                    className=\"w-full mt-2 p-3 border border-gray-600/30 rounded-xl min-h-[140px] bg-gray-700/60 text-gray-100 placeholder-gray-400/50 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                    placeholder=\"e.g. Change background to Tokyo at night\"\n                  />\n\n                  <div className=\"flex gap-2 sm:gap-3 mt-3\">\n                    <button\n                      onClick={handleGenerate}\n                      disabled={loading}\n                      className=\"flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white rounded-lg shadow-lg text-xs sm:text-sm cursor-pointer font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {loading ? \"Working...\" : \"Generate\"}\n                    </button>\n\n                    <button\n                      onClick={() => {\n                        setImagePreview(null);\n                        setBase64Image(null);\n                        setPrompt(\"\");\n                        setResultUrl(null);\n                        clearPolling(); // ensure no polling remains\n                      }}\n                      className=\"px-3 sm:px-4 py-2 border border-purple-700/50 rounded-lg hover:bg-purple-800/50 text-purple-200 text-xs sm:text-sm cursor-pointer transition-colors\"\n                    >\n                      Clear\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"relative rounded-2xl bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 p-4 sm:p-6 shadow-lg\">\n              {showLoader && (\n                <div className=\"absolute inset-0 bg-purple-900/90 backdrop-blur-sm flex flex-col items-center justify-center rounded-2xl z-20\">\n                  <svg\n                    className=\"w-12 h-12 text-purple-400 animate-spin mb-2\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <circle\n                      cx=\"12\"\n                      cy=\"12\"\n                      r=\"10\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"3\"\n                      className=\"opacity-20\"\n                    />\n                    <path\n                      d=\"M22 12a10 10 0 0 0-10-10\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"3\"\n                    />\n                  </svg>\n                  <p className=\"animate-pulse text-purple-200\">Generating...</p>\n                </div>\n              )}\n\n              <h3 className=\"font-semibold text-lg mb-4 text-purple-100\">\n                Result\n              </h3>\n\n              {resultUrl ? (\n                <div className=\"flex flex-col items-center gap-4\">\n                  {/* Before/After Image Slider */}\n                  {imagePreview && (\n                    <div className=\"w-full max-w-[520px] relative rounded-xl overflow-hidden border border-purple-700/50 bg-purple-900/50\">\n                      <div\n                        className=\"relative w-full\"\n                        style={{ aspectRatio: \"1/1\", maxHeight: \"520px\" }}\n                        data-slider-container\n                      >\n                        {/* Original Image (Before) */}\n                        <img\n                          src={imagePreview}\n                          className=\"absolute inset-0 w-full h-full object-contain\"\n                          alt=\"Original\"\n                        />\n                        {/* Generated Image (After) */}\n                        <div\n                          className=\"absolute inset-0 overflow-hidden\"\n                          style={{\n                            clipPath: `inset(0 ${\n                              100 - (sliderPosition || 50)\n                            }% 0 0)`,\n                          }}\n                        >\n                          <img\n                            src={resultUrl}\n                            className=\"w-full h-full object-contain\"\n                            alt=\"Generated\"\n                          />\n                        </div>\n                        {/* Slider Handle */}\n                        <div\n                          className=\"absolute top-0 bottom-0 w-1 bg-white shadow-lg cursor-ew-resize z-10\"\n                          style={{ left: `${sliderPosition || 50}%` }}\n                          onMouseDown={handleSliderStart}\n                          onTouchStart={(e) => {\n                            e.preventDefault();\n                            setIsDragging(true);\n                          }}\n                        >\n                          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center\">\n                            <svg\n                              className=\"w-4 h-4 text-purple-600\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={2}\n                                d=\"M8 9l4-4 4 4m0 6l-4 4-4-4\"\n                              />\n                            </svg>\n                          </div>\n                        </div>\n                      </div>\n                      {/* Labels */}\n                      <div className=\"absolute bottom-2 left-2 px-2 py-1 bg-purple-900/80 rounded text-xs text-purple-200\">\n                        After\n                      </div>\n                      <div className=\"absolute bottom-2 right-2 px-2 py-1 bg-purple-900/80 rounded text-xs text-purple-200\">\n                        Before\n                      </div>\n                    </div>\n                  )}\n\n                  {!imagePreview && (\n                    <div className=\"w-full max-w-[520px] bg-purple-900/50 rounded-xl overflow-hidden border border-purple-700/50 flex justify-center\">\n                      <img\n                        src={resultUrl}\n                        className=\"w-full max-h-[520px] object-contain\"\n                        alt=\"Result\"\n                      />\n                    </div>\n                  )}\n\n                  <div className=\"flex w-full max-w-[520px] gap-2 sm:gap-4 flex-wrap\">\n                    <button\n                      onClick={() => window.open(resultUrl, \"_blank\")}\n                      className=\"flex-1 min-w-[80px] px-2 sm:px-3 py-2 cursor-pointer border border-purple-700/50 rounded-lg hover:bg-purple-800/50 text-purple-200 text-xs sm:text-sm transition-colors\"\n                    >\n                      Open\n                    </button>\n                    <button\n                      onClick={handleDownload}\n                      className=\"flex-1 min-w-[80px] px-2 sm:px-3 py-2 cursor-pointer bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-lg hover:from-sky-600 hover:to-indigo-600 text-xs sm:text-sm font-medium shadow-lg transition-all\"\n                    >\n                      Download\n                    </button>\n                    <button\n                      onClick={handleUseGeneratedImage}\n                      className=\"flex-1 min-w-[120px] px-2 sm:px-3 py-2 cursor-pointer border border-purple-700/50 rounded-lg hover:bg-purple-800/50 text-purple-200 text-xs sm:text-sm transition-colors\"\n                    >\n                      Use Image\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <p className=\"text-purple-400\">No result yet</p>\n              )}\n            </div>\n          </section>\n\n          <aside className=\"space-y-4 sm:space-y-6\">\n            <div className=\"rounded-2xl bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 p-4 sm:p-5 shadow-lg\">\n              <h4 className=\"font-semibold mb-3 text-purple-100 text-sm sm:text-base\">\n                Quick Tools\n              </h4>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => setPrompt(\"remove background\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Remove BG\n                </button>\n\n                <button\n                  onClick={() => setPrompt(\"enhance lighting and clarity\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Enhance\n                </button>\n\n                <button\n                  onClick={() => setPrompt(\"turn into painting\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Painting\n                </button>\n\n                <button\n                  onClick={() => setPrompt(\"remove watermark\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Remove Watermark\n                </button>\n              </div>\n            </div>\n\n            <div className=\"rounded-2xl bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 p-4 sm:p-5 shadow-lg flex items-center justify-center h-[100px] sm:h-[120px]\">\n              <p className=\"text-xs sm:text-sm text-purple-400 text-center\">\n                {\" \"}\n                More tools coming soon...\n              </p>\n            </div>\n          </aside>\n        </main>\n      </div>\n\n      <style>{`\n        @keyframes confetti { 0% { transform: translateY(-10px) rotate(0deg); opacity: 1; } 100% { transform: translateY(220px) rotate(360deg); opacity: 0; } }\n        .confetti-piece { will-change: transform, opacity; pointer-events:none; }\n      `}</style>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAS;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAC7D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAU;IACtD,MAAM,cAAc,IAAA,+MAAM,EAAwB;IAClD,MAAM,kBAAkB,IAAA,+MAAM,EAAwB;IAEtD,4CAA4C;IAC5C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,gBAAgB,IAAA,+MAAM,EAAgB;IAC5C,MAAM,YAAY,CAAC,MAAc,KAAK,IAAI;QACxC,YAAY;QACZ,IAAI,cAAc,OAAO,EAAE,OAAO,YAAY,CAAC,cAAc,OAAO;QACpE,cAAc,OAAO,GAAG,OAAO,UAAU,CACvC,IAAM,YAAY,OAClB;IAEJ;IACA,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,CAAC;YACf,MAAM,SAAU,GAAmB;YACnC,UAAU,QAAQ,WAAW;QAC/B;QACA,OAAO,gBAAgB,CAAC,cAAc;QACtC,OAAO,IACL,OAAO,mBAAmB,CAAC,cAAc;IAC7C,GAAG,EAAE;IAEL,kDAAkD;IAClD,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM;gBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,KAAK,YAAY,IAAI,CAAC,KAAK,YAAY,EACzC,OAAO,OAAO,CAAC;YACnB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YACzC;QACF;QACA;IACF,GAAG;QAAC;KAAO;IAEX,8CAA8C;IAC9C,MAAM,eAAe;QACnB,IAAI,gBAAgB,OAAO,EAAE;YAC3B,cAAc,gBAAgB,OAAO;YACrC,gBAAgB,OAAO,GAAG;QAC5B;IACF;IACA,IAAA,kNAAS,EAAC;QACR,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,eAAe,CAAC;QACpB;QACA,IAAI,eAAe;QACnB,MAAM,cAAc;QACpB,MAAM,aAAa;QAEnB,MAAM,SAAS;YACb;YACA,IAAI;gBACF,MAAM,UAAU,MAAM,MAAM,qBAAqB;oBAC/C,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE;oBAAW;gBACpC;gBAEA,MAAM,WAAW,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM;gBAElD,IAAI,CAAC,UAAU;oBACb,IAAI,gBAAgB,aAAa;wBAC/B;wBACA,cAAc;wBACd,WAAW;wBACX,UAAU;oBACZ;oBACA;gBACF;gBAEA,IAAI,UAAU,UAAU;oBACtB;oBACA,aAAa,SAAS,QAAQ;oBAC9B,cAAc;oBACd,WAAW;oBACX,UAAU;oBACV;gBACF;gBAEA,IAAI,UAAU,UAAU,MAAM;oBAC5B;oBACA,cAAc;oBACd,WAAW;oBACX,UACE;oBAEF;gBACF;gBAEA,IAAI,gBAAgB,aAAa;oBAC/B;oBACA,cAAc;oBACd,WAAW;oBACX,UAAU;gBACZ;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,kBAAkB;gBAChC,IAAI,gBAAgB,aAAa;oBAC/B;oBACA,cAAc;oBACd,WAAW;oBACX,UAAU;gBACZ;YACF;QACF;QAEA;QACA,gBAAgB,OAAO,GAAG,YAAY,QAAQ;IAChD;IAEA,wDAAwD;IACxD,MAAM,gBAAgB,CACpB,MACA,UACA,WACA;QAEA,OAAO,IAAI,QAAQ,CAAC,SAAS;YAC3B,MAAM,MAAM,IAAI;YAChB,IAAI,MAAM,GAAG;gBACX,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;gBACxB,MAAM,cAAc,QAAQ;gBAC5B,IAAI,QAAQ,UAAU;oBACpB,QAAQ;oBACR,SAAS,QAAQ;gBACnB;gBACA,IAAI,SAAS,WAAW;oBACtB,SAAS;oBACT,QAAQ,SAAS;gBACnB;gBACA,MAAM,SAAS,SAAS,aAAa,CAAC;gBACtC,OAAO,KAAK,GAAG;gBACf,OAAO,MAAM,GAAG;gBAChB,MAAM,MAAM,OAAO,UAAU,CAAC;gBAC9B,IAAI,CAAC,KAAK,OAAO,OAAO;gBACxB,IAAI,SAAS,CAAC,KAAK,GAAG,GAAG,OAAO;gBAChC,OAAO,MAAM,CACX,CAAC;oBACC,IAAI,CAAC,MAAM,OAAO,OAAO;oBACzB,QAAQ,IAAI,KAAK;wBAAC;qBAAK,EAAE,KAAK,IAAI,EAAE;wBAAE,MAAM,KAAK,IAAI;oBAAC;gBACxD,GACA,KAAK,IAAI,EACT;YAEJ;YACA,IAAI,OAAO,GAAG;YACd,IAAI,GAAG,GAAG,IAAI,eAAe,CAAC;QAChC;IACF;IAEA,kDAAkD;IAClD,MAAM,mBAAmB,OAAO;QAC9B,IAAI,CAAC,MAAM;QAEX,MAAM,cAAc;QACpB,MAAM,WAAW,gBAAgB,IAAI,CAAC,UAAU,SAAS;QACzD,MAAM,SAAS,WAAW,MAAM;QAChC,MAAM,UAAU,WAAW,MAAM;QAEjC,IAAI;YACF,IAAI,gBAAgB;YACpB,IAAI,KAAK,IAAI,GAAG,OAAO,OAAO,GAC5B,gBAAgB,MAAM,cAAc,MAAM,QAAQ,QAAQ;YAC5D,IAAI,cAAc,IAAI,GAAG,OAAO,OAAO,aAAa;gBAClD,UAAU;gBACV;YACF;YACA,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACjB,MAAM,IAAI,OAAO,MAAM;gBACvB,IAAI,CAAC,GAAG,OAAO,UAAU;gBACzB,gBAAgB;gBAChB,MAAM,QAAQ,EAAE,OAAO,CAAC;gBACxB,MAAM,QAAQ,SAAS,IAAI,EAAE,KAAK,CAAC,QAAQ,KAAK;gBAChD,eAAe;gBACf,UAAU;YACZ;YACA,OAAO,aAAa,CAAC;QACvB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,UAAU;QACZ;IACF;IAEA,MAAM,SAAS,CAAC;QACd,EAAE,cAAc;QAChB,iBAAiB,EAAE,YAAY,EAAE,OAAO,CAAC,EAAE,IAAI;IACjD;IACA,MAAM,aAAa,CAAC,IAAuB,EAAE,cAAc;IAE3D,+CAA+C;IAC/C,MAAM,iBAAiB;QACrB,IAAI,CAAC,aAAa,OAAO,UAAU;QACnC,IAAI,CAAC,OAAO,IAAI,IAAI,OAAO,UAAU;QAErC;QACA,cAAc;QACd,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAQ;gBAAY;YAC7C;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAE1C,IAAI,IAAI,MAAM,KAAK,OAAO,MAAM,cAAc;gBAC5C,cAAc;gBACd,WAAW;gBACX,UAAU;gBACV,WAAW,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG,cAAe;gBACxD;YACF;YACA,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,cAAc;gBACd,WAAW;gBACX,UAAU;gBACV,WAAW,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG,UAAW;gBACpD;YACF;YACA,IAAI,CAAC,MAAM;gBACT,cAAc;gBACd,WAAW;gBACX,UAAU;gBACV;YACF;YACA,IAAI,MAAM,OAAO;gBACf,aAAa,KAAK,KAAK;gBACvB,cAAc;gBACd,WAAW;gBACX,UAAU;gBACV;YACF;YACA,IAAI,MAAM,aAAa;gBACrB,UAAU;gBACV,aAAa,KAAK,WAAW;gBAC7B;YACF;YACA,IAAI,MAAM,OAAO;gBACf,cAAc;gBACd,WAAW;gBACX,UAAU,KAAK,KAAK;gBACpB;YACF;YAEA,cAAc;YACd,WAAW;YACX,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,cAAc;YACd,WAAW;YACX,UAAU;QACZ;IACF;IAEA,+CAA+C;IAC/C,MAAM,iBAAiB;QACrB,IAAI,CAAC,WAAW;QAEhB,IAAI;YACF,IAAI;YACJ,IAAI,UAAU,UAAU,CAAC,UAAU;gBACjC,MAAM,WAAW,MAAM,MAAM;gBAC7B,OAAO,MAAM,SAAS,IAAI;YAC5B,OAAO;gBACL,UAAU;gBACV,MAAM,WAAW,MAAM,MAAM,oBAAoB;oBAC/C,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE,UAAU;oBAAU;gBAC7C;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,IAAI,CAAC,SAAS,EAAE,IAAI,KAAK,KAAK,EAAE;oBAC9B,UAAU,KAAK,KAAK,IAAI;oBACxB;gBACF;gBAEA,MAAM,eAAe,MAAM,MAAM,KAAK,OAAO;gBAC7C,OAAO,MAAM,aAAa,IAAI;YAChC;YAEA,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;YACvC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,IAAI,GAAG;YACZ,KAAK,QAAQ,GAAG,CAAC,gBAAgB,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC;YACnD,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,KAAK,KAAK;YACV,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,OAAO,GAAG,CAAC,eAAe,CAAC;YAE3B,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,UAAU;QACZ;IACF;IAEA,+CAA+C;IAC/C,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW;QAChB,MAAM,YAAY,YAAY,OAAO;QACrC,IAAI,CAAC,WAAW;QAChB,UAAU,SAAS,GAAG;QACtB,MAAM,SAAS;YACb;YACA;YACA;YACA;YACA;YACA;SACD;QACD,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAK;YAC3B,MAAM,KAAK,SAAS,aAAa,CAAC;YAClC,GAAG,SAAS,GAAG;YACf,GAAG,KAAK,CAAC,IAAI,GAAG,GAAG,KAAK,KAAK,MAAM,KAAK,GAAG,CAAC,CAAC;YAC7C,GAAG,KAAK,CAAC,GAAG,GAAG,GAAG,KAAK,KAAK,MAAM,KAAK,GAAG,CAAC,CAAC;YAC5C,GAAG,KAAK,CAAC,KAAK,GAAG,GAAG,IAAI,KAAK,MAAM,KAAK,EAAE,EAAE,CAAC;YAC7C,GAAG,KAAK,CAAC,MAAM,GAAG,GAAG,KAAK,KAAK,MAAM,KAAK,GAAG,EAAE,CAAC;YAChD,GAAG,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,MAAM,EAAE;YACvE,GAAG,KAAK,CAAC,SAAS,GAAG,CAAC,yBAAyB,EAC7C,KAAK,MAAM,KAAK,IACjB,IAAI,CAAC;YACN,GAAG,KAAK,CAAC,OAAO,GAAG;YACnB,GAAG,KAAK,CAAC,SAAS,GAAG,CAAC,SAAS,EAC7B,MAAM,KAAK,MAAM,KAAK,IACvB,qCAAqC,EAAE,KAAK,MAAM,KAAK,IAAI,EAAE,CAAC;YAC/D,UAAU,WAAW,CAAC;QACxB;QACA,MAAM,IAAI,WAAW,IAAO,UAAU,SAAS,GAAG,IAAK;QACvD,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;KAAU;IAEd,6CAA6C;IAC7C,MAAM,oBAAoB,CAAC;QACzB,EAAE,cAAc;QAChB,cAAc;IAChB;IACA,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY;QAEjB,MAAM,kBAAkB,SAAS,aAAa,CAC5C;QAGF,IAAI,CAAC,iBAAiB;QAEtB,MAAM,eAAe,CAAC;YACpB,MAAM,OAAO,gBAAgB,qBAAqB;YAClD,MAAM,IAAI,UAAU,KAAK,IAAI;YAC7B,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,AAAC,IAAI,KAAK,KAAK,GAAI;YAChE,kBAAkB;QACpB;QAEA,MAAM,kBAAkB,CAAC,IAAkB,aAAa,EAAE,OAAO;QAEjE,MAAM,kBAAkB,CAAC;YACvB,EAAE,cAAc,IAAI,4CAA4C;YAChE,aAAa,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO;QACnC;QAEA,MAAM,YAAY,IAAM,cAAc;QAEtC,SAAS,gBAAgB,CAAC,aAAa;QACvC,SAAS,gBAAgB,CAAC,WAAW;QAErC,SAAS,gBAAgB,CAAC,aAAa,iBAAiB;YAAE,SAAS;QAAM;QACzE,SAAS,gBAAgB,CAAC,YAAY;QAEtC,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;YAC1C,SAAS,mBAAmB,CAAC,WAAW;YAExC,SAAS,mBAAmB,CAAC,aAAa;YAC1C,SAAS,mBAAmB,CAAC,YAAY;QAC3C;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,0BAA0B;QAC9B,IAAI,CAAC,WAAW;QAChB,IAAI;YACF,IAAI,UAAU,UAAU,CAAC,UAAU;gBACjC,MAAM,aAAa,UAAU,OAAO,CAAC;gBACrC,MAAM,aACJ,cAAc,IAAI,UAAU,KAAK,CAAC,aAAa,KAAK;gBACtD,gBAAgB;gBAChB,eAAe;gBACf,UAAU;YACZ,OAAO;gBACL,UAAU;gBACV,MAAM,WAAW,MAAM,MAAM,oBAAoB;oBAC/C,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE,UAAU;oBAAU;gBAC7C;gBACA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,IAAI,CAAC,SAAS,EAAE,IAAI,KAAK,KAAK,EAAE;oBAC9B,UAAU,KAAK,KAAK,IAAI;oBACxB;gBACF;gBACA,gBAAgB,KAAK,OAAO;gBAC5B,eAAe,KAAK,MAAM;gBAC1B,UAAU;YACZ;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,UAAU;QACZ;IACF;IAEA,iDAAiD;IACjD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,6HAAG;;;;;0BACJ,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,KAAK;wBACL,WAAU;;;;;;kCAIZ,8OAAC;wBACC,aAAU;wBACV,WAAU;kCAEV,cAAA,8OAAC;4BAAI,WAAU;sCACZ,0BACC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CAAe;;;;;;;;;;;;;;;;;;;;;kCAMtC,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC;gCAAG,WAAU;0CAAoJ;;;;;;0CAGlK,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;kDAClC,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;kDAClC,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;kDAClC,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;kDAClC,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;;;;;;;;;;;;;kCAItC,8OAAC;wBAAK,WAAU;;0CACd,8OAAC;gCAAQ,WAAU;;kDACjB,8OAAC;wCACC,QAAQ;wCACR,YAAY;wCACZ,WAAU;kDAEV,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,WAAU;oDACV,SAAS;wDACP,MAAM,QAAQ,SAAS,aAAa,CAAC;wDACrC,MAAM,IAAI,GAAG;wDACb,MAAM,MAAM,GAAG;wDACf,MAAM,QAAQ,GAAG,CAAC,IAChB,iBACE,AAAC,EAAE,MAAM,CAAsB,KAAK,EAAE,CAAC,EAAE,IAAI;wDAEjD,MAAM,KAAK;oDACb;8DAEC,6BACC,8OAAC;wDACC,KAAK;wDACL,WAAU;;;;;6EAGZ,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEACC,WAAU;gEACV,MAAK;gEACL,SAAQ;;kFAER,8OAAC;wEACC,GAAE;wEACF,QAAO;wEACP,aAAY;;;;;;kFAEd,8OAAC;wEACC,GAAE;wEACF,QAAO;wEACP,aAAY;;;;;;kFAEd,8OAAC;wEACC,GAAE;wEACF,GAAE;wEACF,OAAM;wEACN,QAAO;wEACP,IAAG;wEACH,QAAO;wEACP,aAAY;;;;;;;;;;;;0EAGhB,8OAAC;gEAAE,WAAU;0EAAwB;;;;;;;;;;;;;;;;;8DAK3C,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAM,WAAU;sEAAsC;;;;;;sEAGvD,8OAAC;4DACC,OAAO;4DACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4DACzC,WAAU;4DACV,aAAY;;;;;;sEAGd,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEACC,SAAS;oEACT,UAAU;oEACV,WAAU;8EAET,UAAU,eAAe;;;;;;8EAG5B,8OAAC;oEACC,SAAS;wEACP,gBAAgB;wEAChB,eAAe;wEACf,UAAU;wEACV,aAAa;wEACb,gBAAgB,4BAA4B;oEAC9C;oEACA,WAAU;8EACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAQT,8OAAC;wCAAI,WAAU;;4CACZ,4BACC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,WAAU;wDACV,SAAQ;;0EAER,8OAAC;gEACC,IAAG;gEACH,IAAG;gEACH,GAAE;gEACF,QAAO;gEACP,aAAY;gEACZ,WAAU;;;;;;0EAEZ,8OAAC;gEACC,GAAE;gEACF,QAAO;gEACP,aAAY;;;;;;;;;;;;kEAGhB,8OAAC;wDAAE,WAAU;kEAAgC;;;;;;;;;;;;0DAIjD,8OAAC;gDAAG,WAAU;0DAA6C;;;;;;4CAI1D,0BACC,8OAAC;gDAAI,WAAU;;oDAEZ,8BACC,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEACC,WAAU;gEACV,OAAO;oEAAE,aAAa;oEAAO,WAAW;gEAAQ;gEAChD,uBAAqB;;kFAGrB,8OAAC;wEACC,KAAK;wEACL,WAAU;wEACV,KAAI;;;;;;kFAGN,8OAAC;wEACC,WAAU;wEACV,OAAO;4EACL,UAAU,CAAC,QAAQ,EACjB,MAAM,CAAC,kBAAkB,EAAE,EAC5B,MAAM,CAAC;wEACV;kFAEA,cAAA,8OAAC;4EACC,KAAK;4EACL,WAAU;4EACV,KAAI;;;;;;;;;;;kFAIR,8OAAC;wEACC,WAAU;wEACV,OAAO;4EAAE,MAAM,GAAG,kBAAkB,GAAG,CAAC,CAAC;wEAAC;wEAC1C,aAAa;wEACb,cAAc,CAAC;4EACb,EAAE,cAAc;4EAChB,cAAc;wEAChB;kFAEA,cAAA,8OAAC;4EAAI,WAAU;sFACb,cAAA,8OAAC;gFACC,WAAU;gFACV,MAAK;gFACL,SAAQ;gFACR,QAAO;0FAEP,cAAA,8OAAC;oFACC,eAAc;oFACd,gBAAe;oFACf,aAAa;oFACb,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;0EAOZ,8OAAC;gEAAI,WAAU;0EAAsF;;;;;;0EAGrG,8OAAC;gEAAI,WAAU;0EAAuF;;;;;;;;;;;;oDAMzG,CAAC,8BACA,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DACC,KAAK;4DACL,WAAU;4DACV,KAAI;;;;;;;;;;;kEAKV,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEACC,SAAS,IAAM,OAAO,IAAI,CAAC,WAAW;gEACtC,WAAU;0EACX;;;;;;0EAGD,8OAAC;gEACC,SAAS;gEACT,WAAU;0EACX;;;;;;0EAGD,8OAAC;gEACC,SAAS;gEACT,WAAU;0EACX;;;;;;;;;;;;;;;;;qEAML,8OAAC;gDAAE,WAAU;0DAAkB;;;;;;;;;;;;;;;;;;0CAKrC,8OAAC;gCAAM,WAAU;;kDACf,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DAA0D;;;;;;0DAGxE,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,SAAS,IAAM,UAAU;wDACzB,WAAU;kEACX;;;;;;kEAID,8OAAC;wDACC,SAAS,IAAM,UAAU;wDACzB,WAAU;kEACX;;;;;;kEAID,8OAAC;wDACC,SAAS,IAAM,UAAU;wDACzB,WAAU;kEACX;;;;;;kEAID,8OAAC;wDACC,SAAS,IAAM,UAAU;wDACzB,WAAU;kEACX;;;;;;;;;;;;;;;;;;kDAML,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAE,WAAU;;gDACV;gDAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQf,8OAAC;0BAAO,CAAC;;;MAGT,CAAC;;;;;;;;;;;;AAGP","debugId":null}}]
}