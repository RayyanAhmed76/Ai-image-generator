{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/my-flux-saas/components/Nav.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { LogOut } from \"lucide-react\";\nimport { useState, useRef, useEffect } from \"react\";\n\ntype SubscriptionShape = {\n  status?: \"active\" | \"trialing\" | \"canceled\" | \"none\" | string;\n  current_period_end?: number | string | null; // unix seconds or ISO\n  trial_end?: number | string | null; // unix seconds or ISO\n};\n\nexport default function Nav() {\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const [open, setOpen] = useState(false); // avatar dropdown\n  const [mobileOpen, setMobileOpen] = useState(false); // mobile sidebar state\n  const dropdownRef = useRef<HTMLDivElement | null>(null);\n  const [username, setUsername] = useState<string>(\"User\");\n  const [userInitial, setUserInitial] = useState<string>(\"U\");\n\n  // subscription state\n  const [subscription, setSubscription] = useState<SubscriptionShape | null>(null);\n  const [subLoading, setSubLoading] = useState<boolean>(true);\n\n  \n  const mobileNavWidthRem = 11; //used in css for rem\n\n  function toDate(value?: number | string | null): Date | null {\n    if (!value) return null;\n    if (typeof value === \"number\") {\n      return value > 1e12 ? new Date(value) : new Date(value * 1000);\n    }\n    // string: try ISO\n    const d = new Date(value);\n    return isNaN(d.getTime()) ? null : d;\n  }\n\n  function daysLeft(until?: number | string | null) {\n    const d = toDate(until);\n    if (!d) return null;\n    const now = new Date();\n    const ms = d.getTime() - now.getTime();\n    return Math.ceil(ms / (1000 * 60 * 60 * 24));\n  }\n\n  // Fetch user & subscription info on mount\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      try {\n        const res = await fetch(\"/api/check-usage\");\n        const data = await res.json();\n\n        if (data?.authenticated && data?.username) {\n          setUsername(data.username);\n          setUserInitial(data.username.charAt(0).toUpperCase());\n        }\n\n        // Try to read subscription info from this endpoint if provided\n        if (data?.subscription) {\n          setSubscription(data.subscription as SubscriptionShape);\n          setSubLoading(false);\n          return;\n        }\n\n        // fallback: hit a dedicated subscription endpoint\n        try {\n          const res2 = await fetch(\"/api/subscription-status\");\n          if (res2.ok) {\n            const sdata = await res2.json();\n            setSubscription(sdata || null);\n          } else {\n            setSubscription(null);\n          }\n        } catch (err) {\n          console.warn(\"subscription-status fetch failed\", err);\n          setSubscription(null);\n        }\n      } catch (err) {\n        console.error(\"Error fetching user info:\", err);\n        setSubscription(null);\n      } finally {\n        setSubLoading(false);\n      }\n    };\n\n    fetchUserInfo();\n  }, []);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleDocumentClick(e: MouseEvent) {\n      if (!dropdownRef.current) return;\n      if (!dropdownRef.current.contains(e.target as Node)) {\n        setOpen(false);\n      }\n    }\n    document.addEventListener(\"click\", handleDocumentClick);\n    return () => document.removeEventListener(\"click\", handleDocumentClick);\n  }, []);\n\n  \n  useEffect(() => {\n    setMobileOpen(false);\n  }, [pathname]);\n\n  // Add/remove a class on body and inject CSS to center content while mobile nav is open\n  useEffect(() => {\n    const CLASS = \"mobile-nav-open\";\n    const STYLE_ID = \"mobile-nav-open-style\";\n\n    function addStyle() {\n      if (document.getElementById(STYLE_ID)) return;\n      const style = document.createElement(\"style\");\n      style.id = STYLE_ID;\n      style.innerHTML = `\n        /* Centers the main app content when mobile nav is open.\n           Adjust the selector (#__next > *) if your app structure differs. */\n        body.${CLASS} #__next > * {\n          margin-left: auto !important;\n          margin-right: auto !important;\n          max-width: calc(100% - ${mobileNavWidthRem}rem) !important; /* account for nav width + gap */\n        }\n\n        @media (max-width: 420px) {\n          body.${CLASS} #__next > * {\n            max-width: calc(100% - ${mobileNavWidthRem - 0.5}rem) !important;\n          }\n        }\n      `;\n      document.head.appendChild(style);\n    }\n\n    if (mobileOpen) {\n      document.body.classList.add(CLASS);\n      addStyle();\n    } else {\n      document.body.classList.remove(CLASS);\n    }\n\n    return () => {\n      document.body.classList.remove(CLASS);\n    };\n  }, [mobileOpen]);\n\n  const handleLogout = async () => {\n    try {\n      await fetch(\"/api/logout\", { method: \"POST\" });\n      window.dispatchEvent(\n        new CustomEvent(\"app:notify\", { detail: { message: \"Logged out\" } })\n      );\n      setTimeout(() => router.push(\"/login\"), 600);\n    } catch (err) {\n      window.dispatchEvent(\n        new CustomEvent(\"app:notify\", { detail: { message: \"Logout failed\" } })\n      );\n    }\n  };\n\n  // mobile closed transform: slide out to the right. On sm+ we always show (sm:translate-x-0)\n  const mobileClosedTransform = mobileOpen ? \"translate-x-0\" : \"translate-x-full\";\n\n  // border: default (mobile) use left border because nav sits on right; on sm+ (desktop) use right border (nav on left)\n  const borderResponsive = \"border-l border-purple-700/50 sm:border-r sm:border-l-0\";\n\n  // helpers for rendering subscription UI\n  const renderSubscriptionRow = () => {\n    if (subLoading) {\n      return (\n        <div className=\"text-center py-2 text-xs text-purple-200\">Loading subscription…</div>\n      );\n    }\n\n    const s = subscription || { status: \"none\" };\n\n    if (s.status === \"trialing\" || s.status === \"trial\") {\n      const days = daysLeft(s.trial_end);\n      return (\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"text-sm font-medium text-purple-100\">Free trial</div>\n          <div className=\"text-xs text-purple-200\">\n            {days === null\n              ? \"Trial active\"\n              : days > 0\n              ? `${days} day${days > 1 ? \"s\" : \"\"} left`\n              : \"Trial ending soon\"}\n          </div>\n\n          <div className=\"pt-2\">\n            <button\n              onClick={() => router.push(\"/subscribe\")}\n              className=\"block w-full text-center px-2 py-1 rounded-md bg-gradient-to-r from-sky-500 to-indigo-500 text-white text-sm font-medium\"\n              type=\"button\"\n            >\n              Upgrade\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    if (s.status === \"active\" || s.status === \"paid\" || s.status === \"subscribed\") {\n      const nextDate = toDate(s.current_period_end);\n      const formatted = nextDate\n        ? new Intl.DateTimeFormat(undefined, { month: \"short\", day: \"numeric\", year: \"numeric\" }).format(nextDate)\n        : \"Next billing available\";\n\n      return (\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"text-sm font-medium text-purple-100\">Subscribed</div>\n          <div className=\"text-xs text-purple-200\">Next billing: {formatted}</div>\n\n          <div className=\"pt-2\">\n            <button\n              onClick={() => router.push(\"/account\")}\n              className=\"block w-full cursor-pointer text-center px-2 py-1 rounded-md border hover:bg-purple-500 border-purple-600 text-purple-100 text-sm font-medium\"\n              type=\"button\"\n            >\n              Manage\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    // canceled or none\n    return (\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"text-sm font-medium text-purple-100\">Not subscribed</div>\n        <div className=\"text-xs text-purple-200\">Start a 7-day trial or subscribe for full access.</div>\n\n        <div className=\"pt-2\">\n          <button\n            onClick={() => router.push(\"/account\")}\n            className=\"block w-full text-center px-2 py-1 rounded-md bg-gradient-to-r from-sky-500 to-indigo-500 text-white text-sm font-medium\"\n            type=\"button\"\n          >\n            Subscribe\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {/* Mobile toggle button (visible only on small screens) — top-right */}\n      <button\n        aria-label={mobileOpen ? \"Close navigation\" : \"Open navigation\"}\n        onClick={() => setMobileOpen((s) => !s)}\n        className={`${mobileOpen ? \"\" : \"sm:hidden fixed top-4 right-4 z-50 bg-purple-800/90 text-white p-2 rounded-md shadow-lg focus:outline-none\"}`}\n      >\n        {mobileOpen ? \"\" : (\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"><path strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 6h16M4 12h16M4 18h16\" /></svg>\n        )}\n      </button>\n\n      {/* Overlay that closes mobile nav when clicked */}\n      <div\n        aria-hidden={!mobileOpen}\n        onClick={() => setMobileOpen(false)}\n        className={`sm:hidden fixed inset-0 bg-black/40 z-30 transition-opacity ${mobileOpen ? \"opacity-100 pointer-events-auto\" : \"opacity-0 pointer-events-none\"}`}\n      />\n\n      {/* Sidebar\n          - mobile (default): positioned on right (right-0), slides in/out from right\n          - desktop (sm+): positioned on left (sm:left-0) and always visible (sm:translate-x-0)\n      */}\n      <nav\n        className={`fixed top-0 h-full z-40 flex flex-col py-4 sm:py-6\n          bg-gradient-to-b from-purple-900/90 via-purple-800/90 to-indigo-900/90 backdrop-blur-md\n          transition-transform duration-300 ease-in-out transform\n          ${mobileClosedTransform} sm:translate-x-0\n          right-0 sm:left-0 sm:right-auto\n          w-44 sm:w-16 ${borderResponsive}`}\n        style={{ willChange: \"transform\" }}\n      >\n        {/* Logo row: keep logo and (mobile) site name inline when open */}\n        <div className=\"mb-4 sm:mb-8 w-full flex items-center justify-center sm:justify-center px-3\">\n          <Link href=\"/\" className=\"flex items-center gap-3 w-full\">\n            <div className=\"w-12 h-12 sm:w-16 sm:h-16 rounded-xl p-1.5 sm:p-2 flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow\">\n              <img\n                src=\"/logo.png\"\n                alt=\"Logo\"\n                className=\"w-full h-full object-contain\"\n                onError={(e) => {\n                  const target = e.target as HTMLImageElement;\n                  target.style.display = \"none\";\n                  if (target.parentElement) {\n                    target.parentElement.innerHTML = '<div class=\"w-full h-full rounded-xl bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 flex items-center justify-center text-white font-bold text-sm sm:text-xl\">AI</div>';\n                  }\n                }}\n              />\n            </div>\n\n            {/* Site name label visible on mobile when nav is open; aligns inline with logo */}\n            <span className={`${mobileOpen ? \"inline-block\" : \"hidden\"} sm:hidden text-white font-semibold text-lg ml-2 truncate`}>\n              Bunyad\n            </span>\n          </Link>\n        </div>\n\n        {/* Nav links - icons + labels aligned in a straight column (labels left-aligned) */}\n        <div className=\"flex flex-col gap-3 w-full px-2\">\n          <Link\n            href=\"/\"\n            className={`flex items-center gap-3 p-2 rounded-lg transition-all w-full\n              ${pathname === \"/\" ? \"bg-purple-600/50 text-white shadow-lg\" : \"text-purple-200 hover:bg-purple-700/30 hover:text-white\"}\n              ${mobileOpen ? \"justify-start pl-3\" : \"justify-center\"}`}\n            title=\"Dashboard\"\n          >\n            <svg className=\"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n            </svg>\n            <span className={`${mobileOpen ? \"inline-block\" : \"hidden\"} sm:hidden text-sm font-medium`}>Dashboard</span>\n          </Link>\n\n          {/* replaced Link with button using router.push for reliable navigation */}\n          <button\n            onClick={() => router.push(\"/subscribe\")}\n            className={`flex items-center gap-3 p-2 rounded-lg transition-all w-full\n              ${pathname === \"/subscribe\" ? \"bg-purple-600/50 text-white shadow-lg\" : \"text-purple-200 hover:bg-purple-700/30 hover:text-white\"}\n              ${mobileOpen ? \"justify-start pl-3\" : \"justify-center\"}`}\n            title=\"Plans\"\n            type=\"button\"\n          >\n            <svg className=\"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <span className={`${mobileOpen ? \"inline-block\" : \"hidden\"} sm:hidden text-sm font-medium`}>Plans</span>\n          </button>\n\n          <Link\n            href=\"/about\"\n            className={`flex items-center gap-3 p-2 rounded-lg transition-all w-full\n              ${pathname === \"/about\" ? \"bg-purple-600/50 text-white shadow-lg\" : \"text-purple-200 hover:bg-purple-700/30 hover:text-white\"}\n              ${mobileOpen ? \"justify-start pl-3\" : \"justify-center\"}`}\n            title=\"Homepage\"\n          >\n            <svg className=\"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <span className={`${mobileOpen ? \"inline-block\" : \"hidden\"} sm:hidden text-sm font-medium`}>Homepage</span>\n          </Link>\n        </div>\n\n        {/* Logout / avatar at bottom */}\n        <div className=\"mt-auto w-full px-2 pb-4\">\n          <div ref={dropdownRef} className=\"relative w-full\">\n            <button\n              onClick={() => setOpen((s) => !s)}\n              aria-haspopup=\"true\"\n              aria-expanded={open}\n              className={`w-full flex items-center gap-2 p-2 rounded-lg transition-all cursor-pointer\n                text-purple-200 hover:bg-purple-700/30 hover:text-white\n                ${mobileOpen ? \"justify-start pl-3\" : \"justify-center\"}`}\n              title={username}\n            >\n              <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center font-semibold text-white text-xs sm:text-sm shadow-lg flex-shrink-0\">\n                {userInitial}\n              </div>\n              <span className={`${mobileOpen ? \"inline-block\" : \"hidden\"} sm:hidden ml-1 text-sm font-medium`}>{username}</span>\n            </button>\n\n            {/* Dropdown opens left on mobile (nav on right), opens right on desktop (nav on left) */}\n            <div className={`absolute right-full mr-2 bottom-0 w-44 sm:w-48 bg-purple-800/95 backdrop-blur-md border border-purple-600/50 rounded-lg shadow-xl z-50 sm:left-full sm:ml-2 sm:right-auto ${open ? \"block\" : \"hidden\"}`}>\n              <div className=\"p-3\">\n                <div className=\"px-2 py-1.5 text-sm text-purple-100 font-semibold\">\n                  {username}\n                </div>\n\n                <div className=\"mt-2\">\n                  {renderSubscriptionRow()}\n                </div>\n\n                <div className=\"mt-3 border-t border-purple-700/50 pt-3\">\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full flex items-center gap-2 px-2 py-2 text-sm text-purple-200 hover:bg-purple-700/50 rounded cursor-pointer transition-colors\"\n                    aria-label=\"Logout\"\n                  >\n                    <LogOut size={16} />\n                    <span>Logout</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </nav>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 700, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/my-flux-saas/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Nav from \"../components/Nav\";\n\nexport default function Page(): JSX.Element {\n  const router = useRouter();\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [base64Image, setBase64Image] = useState<string | null>(null);\n  const [prompt, setPrompt] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const [resultUrl, setResultUrl] = useState<string | null>(null);\n  const [showLoader, setShowLoader] = useState(false);\n  const [sliderPosition, setSliderPosition] = useState<number>(50);\n  const [isDragging, setIsDragging] = useState<boolean>(false);\n  const confettiRef = useRef<HTMLDivElement | null>(null);\n  const pollIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  \n  useEffect(() => {\n    const checkUsage = async () => {\n      try {\n        const res = await fetch(\"/api/check-usage\");\n        const data = await res.json();\n\n        if (data.limitReached && !data.isSubscribed) {\n          router.replace(\"/subscribe\");\n        }\n      } catch (err) {\n        console.error(\"Error checking usage:\", err);\n      }\n    };\n\n    checkUsage();\n  }, [router]);\n\n  // Cleanup polling interval on unmount\n  useEffect(() => {\n    return () => {\n      if (pollIntervalRef.current) {\n        clearInterval(pollIntervalRef.current);\n        pollIntervalRef.current = null;\n      }\n    };\n  }, []);\n\n  // toast\n  const [toastMsg, setToastMsg] = useState<string | null>(null);\n  const toastTimerRef = useRef<number | null>(null);\n  useEffect(() => {\n    const handler = (e: Event) => {\n      const detail = (e as CustomEvent)?.detail as any;\n      showToast(detail?.message ?? \"Notification\");\n    };\n    window.addEventListener(\"app:notify\", handler as EventListener);\n    return () => window.removeEventListener(\"app:notify\", handler as EventListener);\n  }, []);\n\n  const showToast = (text: string, ms = 3000) => {\n    setToastMsg(text);\n    if (toastTimerRef.current) window.clearTimeout(toastTimerRef.current);\n    toastTimerRef.current = window.setTimeout(() => setToastMsg(null), ms) as unknown as number;\n  };\n\n  // confetti (same simple impl)\n  useEffect(() => {\n    if (!resultUrl) return;\n    const container = confettiRef.current;\n    if (!container) return;\n\n    container.innerHTML = \"\";\n    const colors = [\"#60A5FA\", \"#F97316\", \"#34D399\", \"#F472B6\", \"#F59E0B\", \"#A78BFA\"];\n\n    for (let i = 0; i < 14; i++) {\n      const el = document.createElement(\"span\");\n      el.className = \"confetti-piece absolute rounded-sm\";\n      el.style.left = `${20 + Math.random() * 60}%`;\n      el.style.top = `${10 + Math.random() * 30}%`;\n      el.style.width = `${6 + Math.random() * 8}px`;\n      el.style.height = `${10 + Math.random() * 10}px`;\n      el.style.background = colors[Math.floor(Math.random() * colors.length)];\n      el.style.transform = `translateY(-10px) rotate(${Math.random() * 360}deg)`;\n      el.style.opacity = \"0\";\n      el.style.animation = `confetti ${900 + Math.random() * 400}ms cubic-bezier(.2,.8,.2,1) forwards ${Math.random() * 200}ms`;\n      container.appendChild(el);\n    }\n\n    const t = setTimeout(() => (container.innerHTML = \"\"), 1600);\n    return () => clearTimeout(t);\n  }, [resultUrl]);\n\n  // file select\n  const handleFileSelect = (file: File | null) => {\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const r = reader.result as string | null;\n      if (!r) {\n        showToast(\"Failed to read file\");\n        return;\n      }\n      setImagePreview(r);\n      const comma = r.indexOf(\",\");\n      const plain = comma >= 0 ? r.slice(comma + 1) : r;\n      setBase64Image(plain);\n      showToast(\"Image ready -> now enter a prompt\");\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const onDrop = (e: DragEvent | any) => {\n    e.preventDefault();\n    handleFileSelect(e.dataTransfer?.files?.[0] ?? null);\n  };\n  const onDragOver = (e: DragEvent | any) => e.preventDefault();\n\n  const handleGenerate = async () => {\n    if (!base64Image) return showToast(\"Upload an image first\");\n    if (!prompt.trim()) return showToast(\"Enter a prompt\");\n\n    setShowLoader(true);\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/generate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ prompt, base64Image }),\n      });\n\n      const json = await res.json();\n\n      if (res.status === 403 && json?.limitReached) {\n        showToast(\"Free trial limit reached. Redirecting to subscription...\");\n        setTimeout(() => {\n          window.location.href = \"/subscribe\";\n        }, 2000);\n        return;\n      }\n\n      if (res.status === 401) {\n        showToast(\"Please log in to continue\");\n        setTimeout(() => {\n          window.location.href = \"/login\";\n        }, 2000);\n        return;\n      }\n\n      if (json?.image) {\n        setResultUrl(json.image);\n        setShowLoader(false);\n        showToast(\"Generated!\");\n        return;\n      }\n\n      if (json?.polling_url) {\n        // Start polling for async results\n        showToast(\"Submitted —> now processing...\");\n        const pollingUrl = json.polling_url;\n        let pollAttempts = 0;\n        const maxAttempts = 60; // 5 minutes max (5s intervals)\n\n        // Clear any existing polling interval\n        if (pollIntervalRef.current) {\n          clearInterval(pollIntervalRef.current);\n        }\n\n        pollIntervalRef.current = setInterval(async () => {\n          pollAttempts++;\n\n          try {\n            const pollRes = await fetch(\"/api/fetch_result\", {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({ pollingUrl }),\n            });\n\n            const pollData = await pollRes.json();\n\n            if (pollData?.imageUrl) {\n              if (pollIntervalRef.current) {\n                clearInterval(pollIntervalRef.current);\n                pollIntervalRef.current = null;\n              }\n              setResultUrl(pollData.imageUrl);\n              setShowLoader(false);\n              setLoading(false);\n              showToast(\"Generated!\");\n            } else if (pollAttempts >= maxAttempts) {\n              if (pollIntervalRef.current) {\n                clearInterval(pollIntervalRef.current);\n                pollIntervalRef.current = null;\n              }\n              setShowLoader(false);\n              setLoading(false);\n              showToast(\"Generation timeout. Please try again.\");\n            }\n            // If ready: false, continue polling\n          } catch (pollErr) {\n            console.error(\"Polling error:\", pollErr);\n            if (pollAttempts >= maxAttempts) {\n              if (pollIntervalRef.current) {\n                clearInterval(pollIntervalRef.current);\n                pollIntervalRef.current = null;\n              }\n              setShowLoader(false);\n              setLoading(false);\n              showToast(\"Error fetching result. Please try again.\");\n            }\n          }\n        }, 5000); // Poll every 5 seconds\n        return;\n      }\n\n      if (json?.error) {\n        setShowLoader(false);\n        showToast(json.error);\n      }\n    } catch (err) {\n      setShowLoader(false);\n      showToast(\"Network error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownload = async () => {\n    if (!resultUrl) return;\n\n    try {\n      let blob: Blob;\n\n      // Check if it's a data URL\n      if (resultUrl.startsWith(\"data:\")) {\n        // Convert data URL to blob\n        const response = await fetch(resultUrl);\n        blob = await response.blob();\n      } else {\n        // Use backend API to fetch image (avoids CORS issues)\n        showToast(\"Preparing download...\");\n        const response = await fetch(\"/api/fetch-image\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ imageUrl: resultUrl }),\n        });\n\n        const data = await response.json();\n\n        if (!response.ok || data.error) {\n          showToast(data.error || \"Failed to prepare download\");\n          return;\n        }\n\n        // Convert data URL to blob\n        const blobResponse = await fetch(data.dataUrl);\n        blob = await blobResponse.blob();\n      }\n\n      // Create a temporary URL for the blob\n      const url = window.URL.createObjectURL(blob);\n\n      // Create a temporary anchor element and trigger download\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = `generated-image-${Date.now()}.png`; \n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n      showToast(\"Image downloaded!\");\n    } catch (err) {\n      console.error(\"Error downloading image:\", err);\n      showToast(\"Failed to download image\");\n    }\n  };\n\n  // Slider handlers for before/after comparison\n  const handleSliderStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  useEffect(() => {\n    if (!isDragging) return;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!imagePreview || !resultUrl) return;\n\n      const sliderContainer = document.querySelector(\"[data-slider-container]\") as HTMLElement;\n      if (!sliderContainer) return;\n\n      const rect = sliderContainer.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));\n      setSliderPosition(percentage);\n    };\n\n    const handleMouseUp = () => {\n      setIsDragging(false);\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isDragging, imagePreview, resultUrl]);\n\n  const handleUseGeneratedImage = async () => {\n    if (!resultUrl) return;\n\n    try {\n      // Check if resultUrl is already a data URL\n      if (resultUrl.startsWith(\"data:\")) {\n        // Extract base64 part from data URL\n        const commaIndex = resultUrl.indexOf(\",\");\n        const base64Data = commaIndex >= 0 ? resultUrl.slice(commaIndex + 1) : resultUrl;\n        // Set the full data URL as preview\n        setImagePreview(resultUrl);\n        setBase64Image(base64Data);\n        showToast(\"Image loaded! Enter a new prompt to modify it.\");\n      } else {\n        // Use backend API to fetch image (avoids CORS issues)\n        showToast(\"Loading image...\");\n        const response = await fetch(\"/api/fetch-image\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ imageUrl: resultUrl }),\n        });\n\n        const data = await response.json();\n\n        if (!response.ok || data.error) {\n          showToast(data.error || \"Failed to load image\");\n          return;\n        }\n\n        // Set the image preview and base64 data\n        setImagePreview(data.dataUrl);\n        setBase64Image(data.base64);\n        showToast(\"Image loaded! Enter a new prompt to modify it.\");\n      }\n    } catch (err) {\n      console.error(\"Error using generated image:\", err);\n      showToast(\"Failed to load image\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\">\n      <Nav />\n      {/* Changed padding: px-6 for small screens, keep large left padding at lg */}\n      <div className=\"max-w-6xl mx-auto px-6 lg:pl-28 lg:pr-8 p-4 sm:p-6 pt-20 sm:pt-24\">\n        <div ref={confettiRef} className=\"pointer-events-none fixed inset-0 z-50\" />\n\n        {/* Toast */}\n        <div aria-live=\"polite\" className=\"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:items-start z-50\">\n          <div className=\"w-full flex flex-col items-center space-y-2 sm:items-end\">\n            {toastMsg && (\n              <div className=\"pointer-events-auto max-w-md w-full bg-gray-800/95 backdrop-blur-md text-gray-100 border border-gray-600/50 rounded-lg shadow-lg overflow-hidden\">\n                <div className=\"p-3 text-sm\">{toastMsg}</div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <header className=\"mb-6 sm:mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-purple-100 via-purple-200 to-indigo-200 bg-clip-text text-transparent pb-3 \">\n            Imagine your Bunyad\n          </h1>\n          <p className=\"text-purple-300 text-base sm:text-lg font-medium mt-2 flex items-center gap-2 flex-wrap\">\n            <span className=\"text-purple-400\">Upload</span>\n            <span className=\"text-purple-500\">→</span>\n            <span className=\"text-purple-400\">Prompt</span>\n            <span className=\"text-purple-500\">→</span>\n            <span className=\"text-purple-400\">Generate</span>\n          </p>\n        </header>\n\n        <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <section className=\"lg:col-span-2 space-y-6\">\n            <div onDrop={onDrop} onDragOver={onDragOver} className=\"rounded-2xl p-4 sm:p-6 border border-purple-700/30 bg-gray-800/40 backdrop-blur-sm shadow-lg\">\n              <div className=\"flex flex-col sm:flex-row gap-4 sm:gap-6\">\n                <div\n                  className=\"w-full sm:w-56 h-48 sm:h-56 bg-gray-700/60 hover:bg-gray-700/80 rounded-xl flex items-center justify-center cursor-pointer border border-gray-600/30\"\n                  onClick={() => {\n                    const input = document.createElement(\"input\");\n                    input.type = \"file\";\n                    input.accept = \"image/*\";\n                    input.onchange = (e: any) => handleFileSelect((e.target as HTMLInputElement).files?.[0] ?? null);\n                    input.click();\n                  }}\n                >\n                  {imagePreview ? (\n                    <img src={imagePreview} className=\"w-full h-full object-cover rounded-xl\" />\n                  ) : (\n                    <div className=\"text-center transition-transform duration-200 hover:scale-110\">\n                      <svg className=\"w-12 h-12 text-gray-400 mx-auto mb-2\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <path d=\"M12 4v8\" stroke=\"currentColor\" strokeWidth=\"2\" />\n                        <path d=\"M20 12l-8-8-8 8\" stroke=\"currentColor\" strokeWidth=\"2\" />\n                        <rect x=\"3\" y=\"12\" width=\"18\" height=\"8\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n                      </svg>\n                      <p className=\"text-sm text-gray-300\">Upload Image</p>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex-1\">\n                  <label className=\"text-sm font-medium text-purple-200\">Prompt</label>\n                  <textarea\n                    value={prompt}\n                    onChange={(e) => setPrompt(e.target.value)}\n                    className=\"w-full mt-2 p-3 border border-gray-600/30 rounded-xl min-h-[140px] bg-gray-700/60 text-gray-100 placeholder-gray-400/50 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                    placeholder=\"e.g. Change background to Tokyo at night\"\n                  />\n\n                  <div className=\"flex gap-2 sm:gap-3 mt-3\">\n                    <button\n                      onClick={handleGenerate}\n                      disabled={loading}\n                      className=\"flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white rounded-lg shadow-lg text-xs sm:text-sm cursor-pointer font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {loading ? \"Working...\" : \"Generate\"}\n                    </button>\n\n                    <button\n                      onClick={() => {\n                        setImagePreview(null);\n                        setBase64Image(null);\n                        setPrompt(\"\");\n                        setResultUrl(null);\n                      }}\n                      className=\"px-3 sm:px-4 py-2 border border-purple-700/50 rounded-lg hover:bg-purple-800/50 text-purple-200 text-xs sm:text-sm cursor-pointer transition-colors\"\n                    >\n                      Clear\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"relative rounded-2xl bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 p-4 sm:p-6 shadow-lg\">\n              {showLoader && (\n                <div className=\"absolute inset-0 bg-purple-900/90 backdrop-blur-sm flex flex-col items-center justify-center rounded-2xl z-20\">\n                  <svg className=\"w-12 h-12 text-purple-400 animate-spin mb-2\" viewBox=\"0 0 24 24\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"3\" className=\"opacity-20\" />\n                    <path d=\"M22 12a10 10 0 0 0-10-10\" stroke=\"currentColor\" strokeWidth=\"3\" />\n                  </svg>\n                  <p className=\"animate-pulse text-purple-200\">Generating...</p>\n                </div>\n              )}\n\n              <h3 className=\"font-semibold text-lg mb-4 text-purple-100\">Result</h3>\n\n              {resultUrl ? (\n                <div className=\"flex flex-col items-center gap-4\">\n                  {/* Before/After Image Slider */}\n                  {imagePreview && (\n                    <div className=\"w-full max-w-[520px] relative rounded-xl overflow-hidden border border-purple-700/50 bg-purple-900/50\">\n                      <div className=\"relative w-full\" style={{ aspectRatio: \"1/1\", maxHeight: \"520px\" }} data-slider-container>\n                        {/* Original Image (Before) */}\n                        <img src={imagePreview} className=\"absolute inset-0 w-full h-full object-contain\" alt=\"Original\" />\n                        {/* Generated Image (After) */}\n                        <div className=\"absolute inset-0 overflow-hidden\" style={{ clipPath: `inset(0 ${100 - (sliderPosition || 50)}% 0 0)` }}>\n                          <img src={resultUrl} className=\"w-full h-full object-contain\" alt=\"Generated\" />\n                        </div>\n                        {/* Slider Handle */}\n                        <div\n                          className=\"absolute top-0 bottom-0 w-1 bg-white shadow-lg cursor-ew-resize z-10\"\n                          style={{ left: `${sliderPosition || 50}%` }}\n                          onMouseDown={handleSliderStart}\n                          // also allow touch dragging\n                          onTouchStart={() => setIsDragging(true)}\n                        >\n                          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center\">\n                            <svg className=\"w-4 h-4 text-purple-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 9l4-4 4 4m0 6l-4 4-4-4\" />\n                            </svg>\n                          </div>\n                        </div>\n                      </div>\n                      {/* Labels */}\n                      <div className=\"absolute bottom-2 left-2 px-2 py-1 bg-purple-900/80 rounded text-xs text-purple-200\">After</div>\n                      <div className=\"absolute bottom-2 right-2 px-2 py-1 bg-purple-900/80 rounded text-xs text-purple-200\">Before</div>\n                    </div>\n                  )}\n\n                  {!imagePreview && (\n                    <div className=\"w-full max-w-[520px] bg-purple-900/50 rounded-xl overflow-hidden border border-purple-700/50 flex justify-center\">\n                      <img src={resultUrl} className=\"w-full max-h-[520px] object-contain\" alt=\"Result\" />\n                    </div>\n                  )}\n\n                  <div className=\"flex w-full max-w-[520px] gap-2 sm:gap-4 flex-wrap\">\n                    <button\n                      onClick={() => window.open(resultUrl, \"_blank\")}\n                      className=\"flex-1 min-w-[80px] px-2 sm:px-3 py-2 cursor-pointer border border-purple-700/50 rounded-lg hover:bg-purple-800/50 text-purple-200 text-xs sm:text-sm transition-colors\"\n                    >\n                      Open\n                    </button>\n                    <button\n                      onClick={handleDownload}\n                      className=\"flex-1 min-w-[80px] px-2 sm:px-3 py-2 cursor-pointer bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-lg hover:from-sky-600 hover:to-indigo-600 text-xs sm:text-sm font-medium shadow-lg transition-all\"\n                    >\n                      Download\n                    </button>\n                    <button\n                      onClick={handleUseGeneratedImage}\n                      className=\"flex-1 min-w-[120px] px-2 sm:px-3 py-2 cursor-pointer border border-purple-700/50 rounded-lg hover:bg-purple-800/50 text-purple-200 text-xs sm:text-sm transition-colors\"\n                    >\n                      Use Image\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <p className=\"text-purple-400\">No result yet</p>\n              )}\n            </div>\n          </section>\n\n          <aside className=\"space-y-4 sm:space-y-6\">\n            <div className=\"rounded-2xl bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 p-4 sm:p-5 shadow-lg\">\n              <h4 className=\"font-semibold mb-3 text-purple-100 text-sm sm:text-base\">Quick Tools</h4>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => setPrompt(\"remove background\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Remove BG\n                </button>\n\n                <button\n                  onClick={() => setPrompt(\"enhance lighting and clarity\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Enhance\n                </button>\n\n                <button\n                  onClick={() => setPrompt(\"turn into painting\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Painting\n                </button>\n\n                <button\n                  onClick={() => setPrompt(\"remove watermark\")}\n                  className=\"px-3 py-2 cursor-pointer rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white font-medium shadow-sm transform transition hover:-translate-y-0.5 hover:shadow-lg\"\n                >\n                  Remove Watermark\n                </button>\n              </div>\n            </div>\n\n            <div className=\"rounded-2xl bg-gray-800/40 backdrop-blur-sm border border-purple-700/30 p-4 sm:p-5 shadow-lg flex items-center justify-center h-[100px] sm:h-[120px]\">\n              <p className=\"text-xs sm:text-sm text-purple-400 text-center\"> More tools coming soon...</p>\n            </div>\n          </aside>\n        </main>\n      </div>\n\n      <style>{`\n        @keyframes confetti { 0% { transform: translateY(-10px) rotate(0deg); opacity: 1; } 100% { transform: translateY(220px) rotate(360deg); opacity: 0; } }\n        .confetti-piece { will-change: transform, opacity; pointer-events:none; }\n      `}</style>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}