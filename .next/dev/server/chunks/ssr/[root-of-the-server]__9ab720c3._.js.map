{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/my-flux-saas/components/Nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/my-flux-saas/components/Nav.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/my-flux-saas/components/Nav.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,8RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmS,GAChU,iEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/my-flux-saas/components/Nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/my-flux-saas/components/Nav.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/my-flux-saas/components/Nav.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,8RAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+Q,GAC5S,6CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/my-flux-saas/app/page.tsx"],"sourcesContent":["// add to top-level imports (already have useState/useEffect/useRef)\nimport { useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Nav from \"../components/Nav\";\n\nexport default function Page(): JSX.Element {\n  // existing states...\n  const [isSubscribed, setIsSubscribed] = useState<boolean>(false);\n  const [isTrial, setIsTrial] = useState<boolean>(false);\n  const [trialEndsAt, setTrialEndsAt] = useState<string | null>(null);\n  const [remaining, setRemaining] = useState<number | null>(null);\n  // ...other states\n\n  // Update your existing checkUsage effect to set these values:\n  useEffect(() => {\n    const checkUsage = async () => {\n      try {\n        const res = await fetch(\"/api/check-usage\");\n        const data = await res.json();\n\n        // existing redirect behaviour\n        if (data.limitReached && !data.isSubscribed) {\n          router.replace(\"/subscribe\");\n        }\n\n        // new: set subscription/trial UI states (fall back safely)\n        setIsSubscribed(Boolean(data.isSubscribed));\n        setIsTrial(Boolean(data.isTrial));\n        setTrialEndsAt(data.trialEndsAt ?? null);\n        setRemaining(typeof data.remaining === \"number\" ? data.remaining : null);\n      } catch (err) {\n        console.error(\"Error checking usage:\", err);\n      }\n    };\n\n    checkUsage();\n  }, [router]);\n\n  // optional: a small helper to format countdown\n  const getTrialText = () => {\n    if (!isTrial || !trialEndsAt) return null;\n    try {\n      const ends = new Date(trialEndsAt);\n      const now = new Date();\n      const ms = ends.getTime() - now.getTime();\n      if (ms <= 0) return \"Trial expired\";\n      const days = Math.floor(ms / (1000 * 60 * 60 * 24));\n      if (days >= 1) return `Trial: ${days} day${days > 1 ? \"s\" : \"\"} left`;\n      const hours = Math.floor(ms / (1000 * 60 * 60));\n      return `Trial: ${hours} hour${hours !== 1 ? \"s\" : \"\"} left`;\n    } catch {\n      return \"Trial active\";\n    }\n  };\n\n  // ...rest of your component\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-950 via-purple-900 to-indigo-950\">\n      <Nav />\n      <div className=\"max-w-6xl mx-auto p-4 sm:p-6 pt-20 sm:pt-24\">\n        {/* Status pill (placed near header) */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <header className=\"flex-1\">\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-purple-100 via-purple-200 to-indigo-200 bg-clip-text text-transparent mb-2\">\n              Flux Kontext\n            </h1>\n            <p className=\"text-purple-300 text-base sm:text-lg font-medium mt-2 flex items-center gap-2 flex-wrap\">\n              <span className=\"text-purple-400\">Upload</span>\n              <span className=\"text-purple-500\">→</span>\n              <span className=\"text-purple-400\">Prompt</span>\n              <span className=\"text-purple-500\">→</span>\n              <span className=\"text-purple-400\">Generate</span>\n            </p>\n          </header>\n\n          {/* Status pill */}\n          <div className=\"ml-4 flex items-center gap-3\">\n            {isSubscribed ? (\n              <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-600/20 text-emerald-300 border border-emerald-500/30 text-sm\">\n                <span className=\"h-2 w-2 rounded-full bg-emerald-400 block\" />\n                Subscribed — Pro\n              </div>\n            ) : isTrial ? (\n              <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-yellow-500/10 text-yellow-300 border border-yellow-400/20 text-sm\">\n                <span className=\"h-2 w-2 rounded-full bg-yellow-400 block\" />\n                {getTrialText() ?? \"Free trial\"}\n                {typeof remaining === \"number\" && (\n                  <span className=\"ml-2 text-xs text-yellow-200\">• {remaining} uses left</span>\n                )}\n              </div>\n            ) : (\n              <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-purple-700/10 text-purple-200 border border-purple-600/20 text-sm\">\n                <span className=\"h-2 w-2 rounded-full bg-purple-400 block\" />\n                Free (limited)\n                {typeof remaining === \"number\" && (\n                  <span className=\"ml-2 text-xs text-purple-300\">• {remaining} left</span>\n                )}\n              </div>\n            )}\n\n            {/* Quick CTA if not subscribed */}\n            {!isSubscribed && (\n              <button\n                onClick={() => router.push(\"/subscribe\")}\n                className=\"px-3 py-1 text-xs rounded-md bg-gradient-to-r from-sky-500 to-indigo-500 text-white shadow-sm hover:brightness-105\"\n              >\n                Upgrade\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* rest of your layout */}\n        <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* ... */}\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}