{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/my-flux-saas/app/api/fetch-image/route.ts"],"sourcesContent":["// app/api/fetch-image/route.ts\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const { imageUrl } = await req.json();\r\n    \r\n    if (!imageUrl) {\r\n      return NextResponse.json({ error: \"imageUrl is required\" }, { status: 400 });\r\n    }\r\n\r\n    // If it's already a data URL, return it as-is\r\n    if (imageUrl.startsWith(\"data:\")) {\r\n      return NextResponse.json({ \r\n        dataUrl: imageUrl,\r\n        base64: imageUrl.includes(\",\") ? imageUrl.split(\",\")[1] : imageUrl\r\n      });\r\n    }\r\n\r\n    \r\n    const response = await fetch(imageUrl);\r\n    \r\n    if (!response.ok) {\r\n      return NextResponse.json(\r\n        { error: `Failed to fetch image: ${response.statusText}` },\r\n        { status: response.status }\r\n      );\r\n    }\r\n\r\n    const arrayBuffer = await response.arrayBuffer();\r\n    const buffer = Buffer.from(arrayBuffer);\r\n    const base64 = buffer.toString(\"base64\");\r\n    \r\n    // Determine content type from response or default to png\r\n    const contentType = response.headers.get(\"content-type\") || \"image/png\";\r\n    const dataUrl = `data:${contentType};base64,${base64}`;\r\n\r\n    return NextResponse.json({\r\n      dataUrl,\r\n      base64,\r\n    });\r\n  } catch (err: any) {\r\n    console.error(\"Error fetching image:\", err);\r\n    return NextResponse.json(\r\n      { error: err?.message || \"Failed to fetch image\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;AAC/B;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEnC,IAAI,CAAC,UAAU;YACb,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,8CAA8C;QAC9C,IAAI,SAAS,UAAU,CAAC,UAAU;YAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,QAAQ,SAAS,QAAQ,CAAC,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;YAC5D;QACF;QAGA,MAAM,WAAW,MAAM,MAAM;QAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,CAAC,uBAAuB,EAAE,SAAS,UAAU,EAAE;YAAC,GACzD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,cAAc,MAAM,SAAS,WAAW;QAC9C,MAAM,SAAS,OAAO,IAAI,CAAC;QAC3B,MAAM,SAAS,OAAO,QAAQ,CAAC;QAE/B,yDAAyD;QACzD,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;QAC5D,MAAM,UAAU,CAAC,KAAK,EAAE,YAAY,QAAQ,EAAE,QAAQ;QAEtD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB;YACA;QACF;IACF,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,KAAK,WAAW;QAAwB,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}